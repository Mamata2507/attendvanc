/*! For license information please see main.897e2a20.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{453:function(e,t,n){e.exports=n(786)},458:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},508:function(e,t,n){},511:function(e,t,n){},524:function(e,t,n){},529:function(e,t,n){},596:function(e,t,n){},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},641:function(e,t,n){},764:function(e,t){},765:function(e,t){},766:function(e,t){},785:function(e,t,n){},786:function(e,t,n){"use strict";n.r(t);var a=n(41),r=n.n(a),o=n(0),c=n.n(o),l=n(33),i=n(63),u=(n(458),n(9)),s=n(58),d=n(11),m="LOGIN",f="EDIT_PROFILE",h="LOGOUT",p="FETCH_DONE",g="LOAD_COURSES",E="ADD_COURSE",v="LOAD_ENROLMENTS",b="ENROL_COURSE",y="SET_ENROLCOUNT",O="FETCH_ENROLCOUNT",j="PRESSED_NOTIFICATION",w="LOAD_NOTIFICATIONS",x="SET_UNCHECKED_NOTIFICATION_COUNT",I="LOAD_FACE_PHOTOS",C="LOAD_ATTENDANCES",N="ADD_ATTENDANCE",D="RESET_STATE",L={name:"course",action:{delete:"Delete",withdraw:"Withdraw"}},k={name:"student",action:{kick:"Kick"}},S={name:"enrolment",action:{approve:"Approve",reject:"Reject"}},_={name:"photo",action:{delete:"Delete"}},P={name:"attendance",action:{delete:"Delete"}},A=["From Disk","From Webcam"],F="640x480",T=640,$=480,R=[{label:"300x250",width:300,height:250},{label:"500x350",width:500,height:350},{label:"640x480",width:640,height:480},{label:"960x720",width:960,height:720},{label:"1024x768",width:1024,height:768},{label:"1280x960",width:1280,height:960}],M=["Remote","Offline"],G={attendances:[],newAttendances:[],initialAccess:!0},z=Object(o.createContext)({});function U(e,t){switch(t.type){case C:return Object(d.a)(Object(d.a)({},e),{},{attendances:[].concat(Object(s.a)(e.newAttendances),Object(s.a)(t.attendances)),initialAccess:!1});case N:return e.initialAccess?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{newAttendances:[t.attendance].concat(Object(s.a)(e.newAttendances))});case D:return Object(d.a)(Object(d.a)({},e),{},{attendances:[],newAttendances:[]});default:return e}}function W(e){var t=Object(o.useReducer)(U,G),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(z.Provider,Object.assign({value:{attendances:a.attendances,loadAttendances:function(e){r({type:C,attendances:e})},addAttendance:function(e){r({type:N,attendance:e})},resetState:function(e){r({type:D,attendance:e})}}},e))}var Y=n(376),q=n.n(Y),H={user:null,avatarColor:{backgroundColor:"rgb(".concat(150*Math.random()+30,", ").concat(150*Math.random()+30,", ").concat(150*Math.random()+30,")")}};if(localStorage.getItem("jwtToken")){var V=q()(localStorage.getItem("jwtToken"));1e3*V.exp<Date.now()?localStorage.removeItem("jwtToken"):H.user=V}var B=Object(o.createContext)({user:null,login:function(e){},logout:function(){}});function K(e,t){switch(t.type){case m:return Object(d.a)(Object(d.a)({},e),{},{user:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{user:t.updated});case h:return Object(d.a)(Object(d.a)({},e),{},{user:null});default:return e}}function J(e){var t=Object(o.useReducer)(K,H),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(B.Provider,Object.assign({value:{user:a.user,avatarColor:a.avatarColor,login:function(e){localStorage.setItem("jwtToken",e.token),r({type:m,payload:e})},logout:function(){localStorage.removeItem("jwtToken"),r({type:h}),window.location.reload()},editProfile:function(e){localStorage.setItem("jwtToken",e.token),r({type:f,updated:e})}}},e))}var Q={courses:[],newCourses:[],fetchedDone:!1,initialAccess:!0},Z=Object(o.createContext)({});function X(e,t){switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{fetchedDone:t.done});case g:return Object(d.a)(Object(d.a)({},e),{},{courses:[].concat(Object(s.a)(e.newCourses),Object(s.a)(t.courses)),initialAccess:!1});case E:return e.initialAccess?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{newCourses:[t.course].concat(Object(s.a)(e.newCourses))})}}function ee(e){var t=Object(o.useReducer)(X,Q),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(Z.Provider,Object.assign({value:{courses:a.courses,fetchedDone:a.fetchedDone,setFetchedDone:function(e){r({type:p,done:e})},loadCourses:function(e){r({type:g,courses:e})},addCourse:function(e){r({type:E,course:e})}}},e))}var te={enrolments:[],newEnrolments:[],initialCountDone:!1,enrolCount:0,fetchedDone:!1,initialAccess:!0},ne=Object(o.createContext)({});function ae(e,t){switch(t.type){case O:return e.initialCountDone?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{enrolCount:t.count,initialCountDone:!0});case y:return Object(d.a)(Object(d.a)({},e),{},{enrolCount:t.count});case p:return Object(d.a)(Object(d.a)({},e),{},{fetchedDone:t.done});case v:var n=[].concat(Object(s.a)(e.newEnrolments),Object(s.a)(t.enrolments));return Object(d.a)(Object(d.a)({},e),{},{enrolments:n,initialAccess:!1});case b:return e.initialAccess?Object(d.a)({},e):Object(d.a)(Object(d.a)({},e),{},{newEnrolments:[t.enrolment].concat(Object(s.a)(e.newEnrolments))});default:return e}}function re(e){var t=Object(o.useReducer)(ae,te),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(ne.Provider,Object.assign({value:{enrolments:a.enrolments,enrolCount:a.enrolCount,fetchedDone:a.fetchedDone,initialCountDone:a.initialCountDone,getEnrolCount:function(e){r({type:O,count:e})},setEnrolCount:function(e){r({type:y,count:e})},loadEnrolments:function(e){r({type:v,enrolments:e})},setFetchedDone:function(e){r({type:p,done:e})},enrolCourse:function(e){r({type:b,enrolment:e})}}},e))}var oe={facePhotos:[],fetchedDone:!1,notifyAddPhoto:!1},ce=Object(o.createContext)({});function le(e,t){switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{fetchedDone:t.done});case I:var n=Object(s.a)(t.facePhotos);return n.length<2?Object(d.a)(Object(d.a)({},e),{},{facePhotos:n,notifyAddPhoto:!0}):Object(d.a)(Object(d.a)({},e),{},{facePhotos:n,notifyAddPhoto:!1});default:return e}}function ie(e){var t=Object(o.useReducer)(le,oe),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(ce.Provider,Object.assign({value:{facePhotos:a.facePhotos,fetchedDone:a.fetchedDone,notifyAddPhoto:a.notifyAddPhoto,loadFacePhotos:function(e){r({type:I,facePhotos:e})},setFetchedDone:function(e){r({type:p,done:e})}}},e))}var ue=Object(o.createContext)(),se=function(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(ue.Provider,Object.assign({value:{collapsed:a,toggleCollapsed:function(){r((function(e){return!e}))}}},e))},de=Object(o.createContext)(),me=function(e){var t=Object(o.useState)(.45),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(de.Provider,Object.assign({value:{threshold:a,setFaceThresholdDistance:function(e){r(e)}}},e))},fe={notifications:[],uncheckedNotificationCount:0,fetchedDone:!1,pressedNotification:!1},he=Object(o.createContext)({});function pe(e,t){switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{fetchedDone:t.done});case j:return Object(d.a)(Object(d.a)({},e),{},{pressedNotification:t.done});case w:return Object(d.a)(Object(d.a)({},e),{},{notifications:Object(s.a)(t.notifications)});case x:return Object(d.a)(Object(d.a)({},e),{},{uncheckedNotificationCount:t.value});default:return e}}function ge(e){var t=Object(o.useReducer)(pe,fe),n=Object(u.a)(t,2),a=n[0],r=n[1];return c.a.createElement(he.Provider,Object.assign({value:{notifications:a.notifications,uncheckedNotificationCount:a.uncheckedNotificationCount,fetchedDone:a.fetchedDone,pressedNotification:a.pressedNotification,setPressedNotification:function(e){r({type:j,done:e})},loadNotifications:function(e){r({type:w,notifications:e})},setUncheckedNotificationCount:function(e){r({type:x,value:e})},setFetchedDone:function(e){r({type:p,done:e})}}},e))}var Ee,ve,be,ye,Oe,je,we,xe,Ie,Ce,Ne,De,Le,ke,Se,_e,Pe,Ae,Fe,Te,$e,Re,Me,Ge,ze,Ue,We,Ye,qe,He,Ve,Be,Ke,Je,Qe,Ze,Xe=n(816),et=n(18),tt=n(792),nt=n(791),at=n(793),rt=n(65),ot=n(378),ct=n(798),lt=n(794),it=n(796),ut=n(800),st=n(220),dt=n(809),mt=function(e){var t=e.title,n=e.action,a=e.itemType,r=e.visible,o=e.loading,l=e.handleOk,i=e.handleCancel,u=e.payload,s=function(e,t){var n,a,r,o,l,i,u;switch(e){case L.name:return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("strong",null,"Course ID"),": ",t.shortID),c.a.createElement("p",null,c.a.createElement("strong",null,"Particular"),":"," ",t.code+"-"+t.name+" ("+t.session+")"));case S.name:return c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Student: "),null===(n=t.student)||void 0===n?void 0:n.firstName," ",null===(a=t.student)||void 0===a?void 0:a.lastName," (",null===(r=t.student)||void 0===r?void 0:r.cardID,")",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("strong",null,"Course (ID: ",null===(o=t.course)||void 0===o?void 0:o.shortID,"): "),null===(l=t.course)||void 0===l?void 0:l.code," ",null===(i=t.course)||void 0===i?void 0:i.name," (",null===(u=t.course)||void 0===u?void 0:u.session,")");case _.name:return c.a.createElement(c.a.Fragment,null,c.a.createElement(nt.a,{shape:"square",src:null===t||void 0===t?void 0:t.photoURL,size:200,icon:c.a.createElement(dt.a,null)}));case k.name:return c.a.createElement("div",null,c.a.createElement("strong",null,"Particular"),":"," ",t.firstName+"-"+t.lastName+" ("+(t.cardID||t.matricNumber)+")"," ");case P.name:return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("strong",null,"Attendance ID: "),t.key),c.a.createElement("br",null),c.a.createElement("p",null,c.a.createElement("strong",null,"Course: "),t.course),c.a.createElement("p",null,c.a.createElement("strong",null,"Date: "),t.date),c.a.createElement("p",null,c.a.createElement("strong",null,"Time: "),t.time),c.a.createElement("p",null,c.a.createElement("strong",null,"Stats: "),t.stats));default:return}};return c.a.createElement(ut.a,{title:t,visible:r,onOk:l,onCancel:i,okButtonProps:{disabled:o},cancelButtonProps:{disabled:o},okText:n},o?c.a.createElement(st.a,{tip:"Loading, please wait..."},c.a.createElement("p",null,"Are you sure to ",n," the following ",a,"?"),s(a,u)):c.a.createElement("div",null,c.a.createElement("p",null,"Are you sure to"," ",c.a.createElement("strong",{style:{fontSize:"15px"}},n)," the following"," ",a,"?"),s(a,u)))},ft=tt.a.Footer,ht=function(){return c.a.createElement(ft,{style:{textAlign:"center"}},c.a.createElement("span",null,"\xa9 Attendvanced ",(new Date).getFullYear()),c.a.createElement("span",null,"\xa0\xa0\xa0 ",c.a.createElement(l.b,{to:"/userguidelines"},"User Guidelines")))},pt=n(814),gt=n(815),Et=n(801),vt=n(806),bt=function(e){switch(e.message){case"GraphQL error: Invalid/Expired token":"GraphQL error: Invalid/Expired token"===e.message&&(ot.a.error("Please re-login!"),localStorage.removeItem("jwtToken"),window.location.reload());default:var t=e.message.replace("GraphQL error: ","");ot.a.error(t)}},yt=n(20),Ot=n(21),jt=n.n(Ot),wt=jt()(Ee||(Ee=Object(yt.a)(["\n  query getCoursesCount {\n    getCoursesCount\n  }\n"]))),xt=jt()(ve||(ve=Object(yt.a)(["\n  query getCourse($id: ID!) {\n    getCourse(courseID: $id) {\n        _id\n        shortID\n        name\n        code\n        session\n    }\n  }\n"]))),It=jt()(be||(be=Object(yt.a)(["\n  query getParticipants($id: ID!) {\n    getParticipants(courseID: $id) {\n      _id\n      firstName\n      lastName\n      profilePictureURL\n      cardID\n    }\n  }\n"]))),Ct=jt()(ye||(ye=Object(yt.a)(["\n  query getCourses($currPage: Int!, $pageSize: Int!) {\n    getCourses(currPage: $currPage, pageSize: $pageSize) {\n      courses {\n        _id\n        shortID\n        creator {\n          firstName\n          lastName\n          cardID\n        }\n        name\n        code\n        session\n        createdAt\n      }\n    }\n  }\n"]))),Nt=jt()(Oe||(Oe=Object(yt.a)(["\n  query getFacePhotosCount {\n    getFacePhotosCount\n  }\n"]))),Dt=jt()(je||(je=Object(yt.a)(["\n  query getFacePhotos($cursor: ID, $limit: Int!) {\n    getFacePhotos(cursor: $cursor, limit: $limit) {\n      facePhotos {\n        _id\n        faceDescriptor\n        photoURL\n        createdAt\n      }\n      hasNextPage\n    }\n  }\n"]))),Lt=jt()(we||(we=Object(yt.a)(["\n  query getFaceMatcherInCourse($courseID: String!) {\n    getFaceMatcherInCourse(courseID: $courseID) {\n      course {\n        _id\n        code\n        name\n        session\n        shortID\n      }\n      matcher {\n        student {\n          _id\n          firstName\n          lastName\n          cardID\n          profilePictureURL\n        }\n        facePhotos {\n          faceDescriptor\n          photoURL\n        }\n      }\n    }\n  }\n"]))),kt=jt()(xe||(xe=Object(yt.a)(["\n  query getUncheckedNotificationsCount {\n    getUncheckedNotificationsCount\n  }\n"]))),St=jt()(Ie||(Ie=Object(yt.a)(["\n  query getNotifications($cursor: ID, $limit: Int!) {\n    getNotifications(cursor: $cursor, limit: $limit) {\n      notifications {\n        _id\n        title\n        content\n        checked\n        createdAt\n        updatedAt\n      }\n      hasNextPage\n    }\n  }\n"]))),_t=(jt()(Ce||(Ce=Object(yt.a)(["\n  query getWarningCount($courseID: ID!) {\n    getWarningCount(courseID: $courseID)\n  }\n"]))),jt()(Ne||(Ne=Object(yt.a)(["\n  query getAttendanceListCountInCourse($courseID: String!) {\n    getAttendanceListCountInCourse(courseID: $courseID)\n  }\n"])))),Pt=jt()(De||(De=Object(yt.a)(["\n  query getAttendance($attendanceID: ID!) {\n    getAttendance(attendanceID: $attendanceID) {\n      _id\n      course {\n        _id\n        name\n        code\n        session\n        shortID\n      }\n      time\n      date\n      mode\n      isOn\n    }\n  }\n"]))),At=jt()(Le||(Le=Object(yt.a)(["\n  query getAttendanceListInCourse(\n    $courseID: String!\n    $currPage: Int!\n    $pageSize: Int!\n  ) {\n    getAttendanceListInCourse(\n      courseID: $courseID\n      currPage: $currPage\n      pageSize: $pageSize\n    ) {\n      course{\n        _id\n        shortID\n        code\n        name\n        session\n      }\n      attendanceList{\n        _id\n        time\n        date\n        mode\n        isOn\n      }\n    }\n  }\n"]))),Ft=jt()(ke||(ke=Object(yt.a)(["\n  query getTrxListInAttendance($attendanceID: ID!) {\n    getTrxListInAttendance(attendanceID: $attendanceID){\n        studentID\n        createdAt\n    }\n  }\n"]))),Tt=n(810),$t=n(803),Rt=function(e){var t=e.isCollapseMenuOpen,n=e.setIsCollapseMenuOpen,a=window.location.pathname,r=("/"===a||a.substr(1),Object(o.useContext)(ne));r.enrolCount,r.getEnrolCount;return c.a.createElement($t.a,{title:"Menu",className:"drawerMenu",visible:t,placement:"top",onClose:function(){n(!1)}},c.a.createElement("p",null,c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement(Tt.a,null),"\xa0 Courses")))},Mt=n(104),Gt=(n(320),function(){var e=window.location.pathname,t="/"===e?"home":e.substr(1),n=Object(o.useContext)(ne);n.enrolCount,n.getEnrolCount,Object(o.useContext)(ue).collapsed;return c.a.createElement(Mt.a,{theme:"dark",mode:"vertical",defaultSelectedKeys:[t]},c.a.createElement(Mt.a.Item,{key:"dashboard",icon:c.a.createElement(Tt.a,null)},c.a.createElement(l.b,{to:"/dashboard"},"Courses")))}),zt=(n(506),{link:"/attendvanc/img/logo.png",width:"30px",height:"30px"}),Ut=function(){var e=Object(o.useContext)(ue).collapsed;return c.a.createElement("div",{className:"lecturerSiderNavbar"},c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement("div",{className:"lecturerSiderNavbar__logo"},c.a.createElement(nt.a,{shape:"square",className:"avatar",size:"large",alt:"Face In",src:zt.link,onError:function(e){console.log(e)}}),c.a.createElement("div",{className:e?"lecturerSiderNavbar__text__hidden":"lecturerSiderNavbar__text"},c.a.createElement("span",{className:"lecturerSiderNavbar__text__item"},"Professor"),c.a.createElement("span",{className:"lecturerSiderNavbar__text__item"},"Version")))),c.a.createElement("div",{className:"lecturerSiderNavbar__menu"},c.a.createElement(Gt,null)))},Wt=n(811),Yt=function(e){var t=e.isCollapseMenuOpen,n=e.setIsCollapseMenuOpen,a=window.location.pathname,r=("/"===a||a.substr(1),Object(o.useContext)(ne));r.enrolCount,r.getEnrolCount;return c.a.createElement($t.a,{title:"Menu",className:"drawerMenu",visible:t,placement:"top",onClose:function(){n(!1)}},c.a.createElement("p",null,c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement(Tt.a,null),"\xa0 Home")),c.a.createElement("p",null,c.a.createElement(l.b,{to:"/facegallery"},c.a.createElement(Wt.a,null),"\xa0 Face Gallery")))},qt=function(){var e=window.location.pathname,t="/"===e?"home":e.substr(1),n=Object(o.useContext)(ne);n.enrolCount,n.getEnrolCount,Object(o.useContext)(ue).collapsed;return c.a.createElement(Mt.a,{theme:"dark",mode:"vertical",defaultSelectedKeys:[t]},c.a.createElement(Mt.a.Item,{key:"dashboard",icon:c.a.createElement(Tt.a,null)},c.a.createElement(l.b,{to:"/dashboard"},"Courses")),c.a.createElement(Mt.a.Item,{key:"facegallery",icon:c.a.createElement(Wt.a,null)},c.a.createElement(l.b,{to:"/facegallery"},"Face Gallery")))},Ht=(n(507),function(){var e=Object(o.useContext)(ue).collapsed;return c.a.createElement("div",{className:"studentSiderNavbar"},c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement("div",{className:"studentSiderNavbar__logo"},c.a.createElement(nt.a,{shape:"square",className:"avatar",size:"large",alt:"Face In",title:"Face in (Student Version)",src:zt.link,onError:function(e){console.log(e)}}),c.a.createElement("div",{className:e?"studentSiderNavbar__text__hidden":"studentSiderNavbar__text"},c.a.createElement("span",{className:"studentSiderNavbar__text__item"},"Student"),c.a.createElement("span",{className:"studentSiderNavbar__text__item"},"Version")))),c.a.createElement("div",{className:"studentSiderNavbar__menu"},c.a.createElement(qt,null)))}),Vt=n(812),Bt=n(813),Kt=n(229),Jt=(n(508),function(){var e=Object(o.useContext)(B),t=e.user,n=e.avatarColor,a=e.logout,r=Object(o.useState)(!1),i=Object(u.a)(r,2),s=i[0],d=i[1];return c.a.createElement("div",{className:"profileNavbar"},c.a.createElement(Kt.a,{overlay:function(){return c.a.createElement(Mt.a,{theme:"dark"},c.a.createElement(Mt.a.Item,{key:"profile",icon:c.a.createElement(Vt.a,null)},c.a.createElement(l.b,{to:"/profile"},"Profile")),c.a.createElement(Mt.a.Item,{key:"logout",icon:c.a.createElement(Bt.a,null),onClick:a},"Log Out"))},visible:s,onClick:function(){return d(!s)},placement:"bottomCenter"},c.a.createElement(nt.a,{className:"avatar",size:"large",alt:"Face In Profile",src:t.profilePictureURL,onError:function(e){console.log(e)},style:!t.profilePictureURL&&n},t.firstName[0])))}),Qt=(n(511),tt.a.Header),Zt=Et.a.Title,Xt=function(){var e=Object(o.useContext)(B).user,t=Object(o.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],i=Object(o.useContext)(he),s=i.uncheckedNotificationCount,d=i.setUncheckedNotificationCount,m=i.pressedNotification,f=i.setPressedNotification;Object(et.b)(kt,{onCompleted:function(e){m||(d(e.getUncheckedNotificationsCount),f(!0))},onError:function(e){bt(e)}});return c.a.createElement(Qt,{className:"greeting__header"},c.a.createElement(Zt,{className:"greeting__title",level:4},c.a.createElement("div",{className:"siderNavbar__collapse"},c.a.createElement(rt.a,{icon:c.a.createElement(pt.a,null),onClick:function(){r(!0)}})),e?0===(null===e||void 0===e?void 0:e.userLevel)?c.a.createElement(Yt,{isCollapseMenuOpen:a,setIsCollapseMenuOpen:r}):c.a.createElement(Rt,{isCollapseMenuOpen:a,setIsCollapseMenuOpen:r}):"error",c.a.createElement("span",null,"Good ",function(){var e=(new Date).getHours();return e>=0&&e<12?"Morning":e>=12&&e<=18?"Afternoon":"Evening"}(),", ",e.firstName),c.a.createElement("div",{className:"greeting__profileNavbar"},c.a.createElement(Jt,null)),c.a.createElement(l.b,{to:"/notification",title:"Notification (".concat(s,")")},c.a.createElement("div",{className:"greeting__notification"},c.a.createElement(vt.a,{count:s},c.a.createElement(nt.a,{icon:c.a.createElement(gt.a,null),style:{backgroundColor:"orange"}}))))))},en=(n(524),tt.a.Sider),tn=function(){var e=Object(o.useContext)(B).user,t=Object(o.useContext)(ue),n=t.collapsed,a=t.toggleCollapsed;return c.a.createElement(c.a.Fragment,null,c.a.createElement(en,{className:"siderNavbar",collapsible:!0,collapsed:n,onCollapse:a},0==e.userLevel?c.a.createElement(Ht,null):c.a.createElement(Ut,null)))},nn=n(804),an=function(e){var t=e.titleList;return c.a.createElement(nn.a,{className:"breadcrumb"},t.map((function(e){return c.a.createElement(nn.a.Item,{key:e.name,className:"breadcrumb__item"},c.a.createElement(l.b,{to:e.link},e.name))})))},rn=jt()(Se||(Se=Object(yt.a)(["\n  mutation createAttendance(\n    $courseID: String!\n    $date: String!\n    $time: String!\n  ) {\n    createAttendance(\n      attendanceInput: {\n        courseID: $courseID\n        date: $date\n        time: $time\n      }\n    ) {\n      _id\n      course {\n        _id\n        shortID\n        name\n        code\n        session\n      }\n      date\n      time\n      mode\n    }\n  }\n"]))),on=jt()(_e||(_e=Object(yt.a)(["\n  mutation editAttendanceMode($attendanceID: ID!, $mode: String!) {\n    editAttendanceMode(attendanceID: $attendanceID, mode: $mode) {\n      _id\n      course {\n        _id\n        shortID\n        name\n        code\n        session\n      }\n      date\n      time\n      mode\n    }\n  }\n"]))),cn=jt()(Pe||(Pe=Object(yt.a)(["\n  mutation editAttendanceOnOff($attendanceID: ID!, $isOn: Boolean!) {\n    editAttendanceOnOff(attendanceID: $attendanceID, isOn: $isOn) {\n      _id\n      course {\n        _id\n        shortID\n        name\n        code\n        session\n      }\n      date\n      time\n      mode\n      isOn\n    }\n  }\n"]))),ln=jt()(Ae||(Ae=Object(yt.a)(["\n  mutation deleteAttendance($attendanceID: ID!) {\n    deleteAttendance(attendanceID: $attendanceID) {\n      _id\n    }\n  }\n"]))),un=jt()(Fe||(Fe=Object(yt.a)(["\n  mutation createCourse($code: String!, $name: String!, $session: String!) {\n    createCourse(courseInput: { code: $code, name: $name, session: $session }) {\n      _id\n      shortID\n      code\n      name\n      session\n      createdAt\n    }\n  }\n"]))),sn=jt()(Te||(Te=Object(yt.a)(["\n  mutation deleteCourse($id: ID!) {\n    deleteCourse(courseID: $id) {\n      _id\n      name\n      code\n      session\n    }\n  }\n"]))),dn=jt()($e||($e=Object(yt.a)(["\n  mutation enrolCourse($id: ID!) {\n    enrolCourse(courseID: $id)\n  }\n"]))),mn=jt()(Re||(Re=Object(yt.a)(["\n  mutation withdrawCourse($id: ID!) {\n    withdrawCourse(courseID: $id)\n  }\n"]))),fn=(jt()(Me||(Me=Object(yt.a)(["\n  mutation approveEnrolment($id: ID!) {\n    approveEnrolment(enrolmentID: $id)\n  }\n"]))),jt()(Ge||(Ge=Object(yt.a)(["\n  mutation approveEnrolment($id: ID!) {\n    rejectEnrolment(enrolmentID: $id)\n  }\n"]))),jt()(ze||(ze=Object(yt.a)(["\n  mutation addFacePhoto(\n    $photoData: String!\n    $faceDescriptor: String!\n  ) {\n    addFacePhoto(\n      photoData: $photoData\n      faceDescriptor: $faceDescriptor\n    ) {\n      faceDescriptor\n      photoURL\n    }\n  }\n"])))),hn=jt()(Ue||(Ue=Object(yt.a)(["\n  mutation deleteFacePhoto($photoID: ID!) {\n    deleteFacePhoto(photoID: $photoID)\n  }\n"]))),pn=jt()(We||(We=Object(yt.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      _id\n      email\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n      userLevel\n      token\n    }\n  }\n"]))),gn=jt()(Ye||(Ye=Object(yt.a)(["\n  mutation googleSignIn(\n    $googleID: String!\n    $googleEmail: String!\n    $googleFirstName: String!\n    $googleLastName: String!\n    $googleProfilePicture: String!\n  ) {\n    googleSignIn(\n      googlePersonInput: {\n        googleID: $googleID\n        googleEmail: $googleEmail\n        googleFirstName: $googleFirstName\n        googleLastName: $googleLastName\n        googleProfilePicture: $googleProfilePicture\n      }\n    ) {\n      _id\n      email\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n      userLevel\n      token\n    }\n  }\n"]))),En=jt()(qe||(qe=Object(yt.a)(["\n  mutation register(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $cardID: String!\n    $password: String!\n    $confirmPassword: String!\n    $userLevel: Int!\n  ) {\n    register(\n      personInput: {\n        firstName: $firstName\n        lastName: $lastName\n        email: $email\n        cardID: $cardID\n        password: $password\n        confirmPassword: $confirmPassword\n        userLevel: $userLevel\n      }\n    ) {\n      _id\n      email\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n      userLevel\n      token\n    }\n  }\n"]))),vn=jt()(He||(He=Object(yt.a)(["\n  mutation kickParticipant($participantID: ID!, $courseID: String!) {\n    kickParticipant(participantID: $participantID, courseID: $courseID)\n  }\n"]))),bn=(jt()(Ve||(Ve=Object(yt.a)(["\n  mutation warnParticipant($participantID: ID!, $courseID: String!) {\n    warnParticipant(participantID: $participantID, courseID: $courseID)\n  }\n"]))),jt()(Be||(Be=Object(yt.a)(["\n  mutation addParticipant($email: String!, $courseID: String!) {\n    addParticipant(email: $email, courseID: $courseID) {\n      _id\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n    }\n  }\n"]))),jt()(Ke||(Ke=Object(yt.a)(["\n  mutation editProfile(\n    $firstName: String!\n    $lastName: String!\n    $cardID: String!\n    $profilePicture: String\n  ) {\n    editProfile(\n      firstName: $firstName\n      lastName: $lastName\n      cardID: $cardID\n      profilePicture: $profilePicture\n    ) {\n      _id\n      email\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n      userLevel\n      createdAt\n      token\n    }\n  }\n"])))),yn=jt()(Je||(Je=Object(yt.a)(["\n  mutation editCardIDAndUserLevel($cardID: String!, $userLevel: Int!) {\n    editCardIDAndUserLevel(cardID: $cardID, userLevel: $userLevel) {\n      _id\n      email\n      firstName\n      lastName\n      cardID\n      profilePictureURL\n      userLevel\n      createdAt\n      token\n    }\n  }\n"]))),On=(jt()(Qe||(Qe=Object(yt.a)(["\n  mutation obtainStudentWarning($participantID: ID!, $courseID: String!) {\n    obtainStudentWarning(participantID: $participantID, courseID: $courseID)\n  }\n"]))),jt()(Ze||(Ze=Object(yt.a)(["\n  mutation createTrx($attendanceID: ID!, $studentID: ID!) {\n    createTrx(\n      trxInput: { attendanceID: $attendanceID, studentID: $studentID }\n    )\n  }\n"])))),jn=n(171),wn=n(96),xn=function(e){var t=e.course,n=Object(o.useContext)(B).user;return c.a.createElement(jn.a,{className:"courseDetails__row"},c.a.createElement(wn.a,null,c.a.createElement(ct.a,{className:"courseDetails__info"},c.a.createElement("p",{className:"courseDetails__shortID"},"ID: ",t.shortID),c.a.createElement("p",null,c.a.createElement("strong",null,"Code:")," ",t.code),c.a.createElement("p",null,c.a.createElement("strong",null,"Name:")," ",t.name),c.a.createElement("p",null,c.a.createElement("strong",null,"Session:")," ",t.session),1===n.userLevel&&c.a.createElement(c.a.Fragment,null,c.a.createElement(rt.a,{type:"primary",className:"courseDetails__takeAttendance btn"},c.a.createElement(l.b,{to:"/course/".concat(t.shortID,"/attendanceForm")},"Create Attendance")),c.a.createElement("br",null),c.a.createElement("br",null)),c.a.createElement("br",null),c.a.createElement(l.b,{to:"/course/".concat(t.shortID,"/attendanceList")},"Attendance List"))))},In=(n(529),tt.a.Content),Cn=function(e){var t=[{title:c.a.createElement("strong",null,"Avatar"),dataIndex:"profilePictureURL",key:"profilePictureURL",render:function(e,t){return c.a.createElement(nt.a,{src:e,size:50,style:{backgroundColor:"rgb(".concat(150*Math.random()+30,", ").concat(150*Math.random()+30,", ").concat(150*Math.random()+30,")")}},t.displayedName[0])},align:"center"},{title:c.a.createElement("strong",null,"Matric Number"),dataIndex:"cardID",key:"cardID",align:"center",sorter:function(e,t){return e.cardID.localeCompare(t.cardID)}},{title:c.a.createElement("strong",null,"Name"),dataIndex:"displayedName",key:"displayedName",align:"center",sorter:function(e,t){return e.displayedName.localeCompare(t.displayedName)}},{title:c.a.createElement("strong",null,"Action"),key:"action",render:function(e){return c.a.createElement(at.a,{size:"middle"},c.a.createElement(rt.a,{danger:!0,className:"courseDetails__kickBtn",onClick:function(){v(!0),h(e)},loading:e.key===f.key&&x.loading},"Remove"))},align:"center"}],n=Object(o.useContext)(B).user,a=Object(o.useState)([]),r=Object(u.a)(a,2),l=r[0],i=r[1],d=Object(o.useState)({}),m=Object(u.a)(d,2),f=m[0],h=m[1],p=Object(o.useState)(!1),g=Object(u.a)(p,2),E=g[0],v=g[1];0==n.userLevel&&t.splice(-1,1);var b=Object(et.b)(xt,{onError:function(e){bt(e)},variables:{id:e.match.params.id},notifyOnNetworkStatusChange:!0}),y=Object(et.b)(It,{onError:function(e){bt(e)},variables:{id:e.match.params.id},notifyOnNetworkStatusChange:!0});Object(o.useEffect)((function(){y.data&&i(y.data.getParticipants)}),[y.data]);var O=Object(et.a)(vn,{onCompleted:function(e){ot.a.success(e.kickParticipant)},onError:function(e){bt(e)}}),j=Object(u.a)(O,2),w=j[0],x=j[1],I=[{name:"Home",link:"/dashboard"},{name:"Course: ".concat(e.match.params.id),link:"/course/".concat(e.match.params.id)}];return c.a.createElement(tt.a,{className:"courseDetails layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,{firstName:n.firstName,profilePicture:n.profilePicture}),c.a.createElement(an,{titleList:I}),c.a.createElement(In,null,c.a.createElement(ct.a,{className:"courseDetails__card"},b.data&&c.a.createElement(xn,{course:b.data.getCourse})),c.a.createElement(lt.a,{orientation:"left",style:{color:"#333",fontWeight:"normal"}},"Participants"),c.a.createElement(it.a,{scroll:{x:"max-content"},columns:t,dataSource:function(e){var t=e.find((function(e){return e._id===n._id}));return t&&(e=[t].concat(Object(s.a)(e.filter((function(e){return e._id!==n._id}))))),e.map((function(e){return{key:e._id,profilePictureURL:e.profilePictureURL,firstName:e.firstName,lastName:e.lastName,displayedName:e.firstName+" "+e.lastName,cardID:e.cardID}}))}(l),loading:y.loading}),c.a.createElement(rt.a,{style:{float:"right"},icon:c.a.createElement(Xe.a,null),disabled:y.loading,loading:y.loading,onClick:function(){return y.refetch()}},"Refresh Table"),c.a.createElement(mt,{title:"Delete Course",action:k.action.kick,itemType:k.name,visible:E,loading:x.loading,handleOk:function(){return t=f.key,n=e.match.params.id,void w({update:function(){var e=l.filter((function(e){return e.key!==t}));i(e),y.refetch(),v(!1)},variables:{participantID:t,courseID:n}});var t,n},handleCancel:function(){return v(!1)},payload:f})),c.a.createElement(ht,null)))},Nn=n(817),Dn=n(818),Ln=n(802),kn=n(799),Sn=n(805),_n=n(102),Pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o.useState)(t),a=Object(u.a)(n,2),r=a[0],c=a[1],l=function(e){c(Object(d.a)(Object(d.a)({},r),{},Object(_n.a)({},e.target.name,e.target.value)))},i=function(t){e()};return{onChange:l,onSubmit:i,values:r}},An=tt.a.Content,Fn=function(e){var t=e.refetchTableTotal,n=e.refetchTable,a=(Object(o.useContext)(B).user,Object(o.useContext)(Z).addCourse,Pn((function(){m()}))),r=a.onSubmit,l=a.onChange,i=a.values,s=Object(et.a)(un,{update:function(){ot.a.success("Create course successfully."),t(),n()},onError:function(e){bt(e)},variables:{name:i.courseName,code:i.courseCode,session:i.courseSession}}),d=Object(u.a)(s,2),m=d[0],f=d[1].loading;return c.a.createElement(An,null,c.a.createElement(ct.a,{title:"Add Course Form",className:"addCourse__card"},c.a.createElement("br",null),c.a.createElement(kn.a,{className:"addCourse__form",name:"basic",onFinish:r},c.a.createElement(kn.a.Item,{label:"Course Code",name:"courseCode",rules:[{required:!0,message:"Please input course code!"}]},c.a.createElement(Sn.a,{name:"courseCode",placeholder:"Enter course code",onChange:l})),c.a.createElement(kn.a.Item,{label:"Course Name",name:"courseName",rules:[{required:!0,message:"Please input course name!"}]},c.a.createElement(Sn.a,{name:"courseName",placeholder:"Enter course name",onChange:l})),c.a.createElement(kn.a.Item,{label:"Course Session",name:"courseSession",rules:[{required:!0,message:"Please input course session!"}]},c.a.createElement(Sn.a,{name:"courseSession",placeholder:"Enter course session",onChange:l})),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",type:"primary",htmlType:"submit",loading:f},"Submit")))))},Tn=function(){var e=Object(o.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(et.a)(dn,{onCompleted:function(e){ot.a.success("Enrol success")},onError:function(e){bt(e)},variables:{id:n}}),l=Object(u.a)(r,2),i=l[0],s=l[1];return c.a.createElement("div",null,c.a.createElement("p",{className:"alert"},"\ud83e\udc83 Enter Course ID for new enrolment"),c.a.createElement(kn.a,{style:{display:"flex"},onFinish:function(){return i()}},c.a.createElement(kn.a.Item,{label:"Course ID",name:"courseID",rules:[{required:!0,message:"Please input course ID!"}]},c.a.createElement(Sn.a,{name:"courseCode",placeholder:"Enter course ID to enrol",onChange:function(e){return a(e.target.value)}})),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",type:"primary",loading:s.loading,style:{marginLeft:"10px"},htmlType:"submit"},"Submit"))))},$n=(n(596),tt.a.Content,function(e){var t,n=Object(o.useContext)(B).user,a=[{title:c.a.createElement("strong",null,"Bil"),dataIndex:"bil",key:"bil",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},sorter:{compare:function(e,t){return e.bil-t.bil},multiple:2}},{title:c.a.createElement("strong",null,"ID"),dataIndex:"shortID",key:"shortID",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},sorter:function(e,t){return e.code.localeCompare(t.date)}},{title:c.a.createElement("strong",null,"Code"),dataIndex:"code",key:"code",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},sorter:function(e,t){return e.code.localeCompare(t.date)}},{title:c.a.createElement("strong",null,"Name"),key:"name",dataIndex:"name",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},align:"center",sorter:function(e,t){return e.name.localeCompare(t.date)}},{title:c.a.createElement("strong",null,"Session"),key:"session",dataIndex:"session",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},align:"center",sorter:function(e,t){return e.name.localeCompare(t.date)}},{title:c.a.createElement("strong",null,"Owner"),key:"owner",dataIndex:"owner",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:C},e)},align:"center",sorter:function(e,t){return e.name.localeCompare(t.date)}},{title:c.a.createElement("strong",null,"Action"),dataIndex:"action",render:function(e,t){return c.a.createElement(Ln.a,{active:!0,loading:C},c.a.createElement(rt.a,{onClick:function(){return $(t)},style:{margin:"10px"},icon:c.a.createElement(Nn.a,null)}),c.a.createElement(rt.a,{onClick:function(){return R(t)},loading:E.key==t.key&&_.loading,disabled:E.key==t.key&&_.loading,style:{margin:"10px"},type:"danger",icon:c.a.createElement(Dn.a,null)}))},align:"center"}],r=Object(o.useContext)(Z),l=r.courses,i=r.loadCourses,s=Object(o.useState)({pageSize:5,current:1,total:0}),m=Object(u.a)(s,2),f=m[0],h=m[1],p=Object(o.useState)({}),g=Object(u.a)(p,2),E=g[0],v=g[1],b=Object(o.useState)(!1),y=Object(u.a)(b,2),O=y[0],j=y[1],w=Object(et.b)(wt,{onCompleted:function(e){h(Object(d.a)(Object(d.a)({},f),{},{total:e.getCoursesCount}))},onError:function(e){bt(e)},notifyOnNetworkStatusChange:!0}),x=Object(et.b)(Ct,{onCompleted:function(e){var t,n;h(Object(d.a)(Object(d.a)({},f),{},{total:null===(t=w.data)||void 0===t?void 0:t.getCoursesCount})),(null===(n=w.data)||void 0===n?void 0:n.getEnrolledCoursesCount)-(f.current-1)*f.pageSize<=0&&1!==f.current&&h((function(e){return Object(d.a)(Object(d.a)({},e),{},{current:e.current-1})}))},onError:function(e){bt(e)},variables:{currPage:f.current,pageSize:f.pageSize},notifyOnNetworkStatusChange:!0}),I=x.data,C=x.loading,N=x.refetch,D=(x.fetchMore,Object(et.a)(mn,{onCompleted:function(e){ot.a.success(e.withdrawCourse)},update:function(){j(!1),N(),w.refetch()},onError:function(e){bt(e)},variables:{id:E._id}})),k=Object(u.a)(D,2),S=k[0],_=k[1],P=Object(et.a)(sn,{update:function(){j(!1),N(),w.refetch()},onError:function(e){bt(e)},variables:{id:E._id}}),A=Object(u.a)(P,2),F=A[0],T=A[1];Object(o.useEffect)((function(){I&&(console.log(I),i(I.getCourses.courses))}),[I]);var $=function(t){e.history.push("/course/".concat(t.shortID))},R=function(e){v(e),j(!0)};return c.a.createElement(tt.a,{className:"dashboard layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Home",link:"/dashboard"}]}),c.a.createElement(ct.a,null,0==n.userLevel&&c.a.createElement(Tn,null),1==n.userLevel&&c.a.createElement(Fn,{refetchTableTotal:w.refetch,refetchTable:N}),c.a.createElement(at.a,{direction:"vertical",className:"width100"},c.a.createElement("h1",null,"Total ",0==n.userLevel?"Enrolled":"Created"," Course:",(null===(t=w.data)||void 0===t?void 0:t.getCoursesCount)||0),c.a.createElement(rt.a,{style:{float:"right"},icon:c.a.createElement(Xe.a,null),disabled:C,loading:C,onClick:function(){return N()}},"Refresh Table"),c.a.createElement(it.a,{scroll:{x:"max-content"},loading:C,pagination:f,onChange:function(e){h(e)},dataSource:function(e){var t=[];return e.map((function(e,n){var a={_id:e._id,key:e._id,bil:!C&&f.pageSize*(f.current-1)+n+1,shortID:e.shortID,code:e.code,name:e.name,session:e.session,owner:e.creator.firstName+" "+e.creator.lastName+" ("+e.creator.cardID+")"};t.push(a)})),t}(l),columns:a}),console.log(l),c.a.createElement(mt,{title:0==n.userLevel?"Withdraw Course":"Delete Course",action:0==n.userLevel?L.action.withdraw:L.action.delete,itemType:L.name,visible:O,loading:0==n.userLevel?_.loading:T.loading,handleOk:function(e){0==n.userLevel?S():F()},handleCancel:function(e){j(!1)},payload:E}))),c.a.createElement(ht,null)))}),Rn=(n(788),n(342),n(637),tt.a.Header),Mn=function(){var e=window.location.pathname.substr(1);return c.a.createElement("div",{className:"headerNavbar"},c.a.createElement(Rn,{className:"sameco"},c.a.createElement(l.b,{to:"/"},c.a.createElement("div",{className:"headerNavbar__logo"},c.a.createElement(nt.a,{shape:"square",className:"avatar",size:"large",alt:"Attendlytics",src:zt.link,onError:function(e){console.log(e)}}),c.a.createElement("div",{className:"headerNavbar__text"},c.a.createElement("span",{className:"headerNavbar__text__item",style:{color:"white"}},"Attendvanced")))),c.a.createElement("div",{className:"headerNavbar__menu"},c.a.createElement(Mt.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[e]},c.a.createElement(Mt.a.Item,{key:"signin",className:"sameco"},c.a.createElement(l.b,{to:"/signin"},"Sign in")),c.a.createElement(Mt.a.Item,{key:"signup",className:"sameco"},c.a.createElement(l.b,{to:"/signup"},"Sign up"))))))},Gn=(tt.a.Content,Et.a.Title,function(){return c.a.createElement(tt.a,{className:"home layout"},c.a.createElement(Mn,null),c.a.createElement("section",{className:"text-gray-600 body-font"},c.a.createElement("div",{className:"container mx-auto flex px-5 py-24 md:flex-row flex-col items-center"},c.a.createElement("div",{className:"lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center"},c.a.createElement("h1",{className:"title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900"},"Welcome to",c.a.createElement("br",{className:"hidden lg:inline-block"})," Attendvanced \ud83d\udc4b"),c.a.createElement("p",{className:"mb-8 leading-relaxed"},"A facial recognition based attendance monitoring system. For professors to automatically manage and track attendance of the course that he is taking.If you are a first time user, Please visit ",c.a.createElement(l.b,{to:"/userguidelines"}," User Guidelines")),c.a.createElement("div",{className:"flex justify-center"},c.a.createElement("button",{className:"inline-flex text-white bg-blue-500 border-0 py-2 px-6 focus:outline-none hover:bg-blue-600 rounded text-lg"},c.a.createElement(l.b,{to:"/signup"},"Get Started")),c.a.createElement("button",{className:"ml-4 inline-flex text-gray-700 bg-gray-100 border-0 py-2 px-6 focus:outline-none hover:bg-gray-200 rounded text-lg"},c.a.createElement(l.b,{to:"/userguidelines"}," User Guidelines")))),c.a.createElement("div",{className:"lg:max-w-lg lg:w-full md:w-1/2 w-5/6"},c.a.createElement("img",{className:"object-cover object-center rounded",alt:"hero",src:"https://i.ibb.co/47TYX2v/main.png"})))),c.a.createElement("section",{class:"text-gray-600 body-font"},c.a.createElement("div",{class:"container px-5 py-24 mx-auto"},c.a.createElement("div",{class:"text-center mb-20"},c.a.createElement("h1",{class:"sm:text-3xl text-2xl font-medium text-center title-font text-gray-900 mb-4"},"Features \u2b50"),c.a.createElement("p",{class:"text-base leading-relaxed xl:w-2/4 lg:w-3/4 mx-auto"},"Below listed are some of the features that makes us best in the Industry.")),c.a.createElement("div",{class:"flex flex-wrap lg:w-4/5 sm:mx-auto sm:mb-2 -mx-2"},c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Separate teams for separate courses."))),c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Graphical visualisation of attendance strength."))),c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Notification System for students."))),c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Can train model through both images and video."))),c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Professors can download attendance offline."))),c.a.createElement("div",{class:"p-2 sm:w-1/2 w-full"},c.a.createElement("div",{class:"bg-gray-100 rounded flex p-4 h-full items-center"},c.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-blue-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),c.a.createElement("path",{d:"M22 4L12 14.01l-3-3"})),c.a.createElement("span",{class:"title-font font-medium"},"Students can edit their profile.")))),c.a.createElement("button",{class:"flex mx-auto mt-16 text-white bg-blue-500 border-0 py-2 px-8 focus:outline-none hover:bg-blue-600 rounded text-lg"},c.a.createElement(l.b,{to:"/signup"},"Get Started")))),c.a.createElement("hr",{style:{border:"0",height:"1px",background:"#333",backgroundImage:"linear-gradient(to right, #ccc, #333, #ccc)"}}),c.a.createElement(ht,null))}),zn=n(819),Un=n(820),Wn=n(821),Yn=n(238),qn=n.n(Yn),Hn="405467209701-eouj6ehmlle59vl4im2jr4fot0ceg5g1.apps.googleusercontent.com",Vn=tt.a.Content,Bn=function(e){var t=Object(o.useContext)(B),n=Pn((function(){p()}),{email:"",password:""}),a=n.onChange,r=n.onSubmit,l=n.values,i=Object(o.useState)(!1),s=Object(u.a)(i,2),d=s[0],m=s[1],f=Object(et.a)(pn,{update:function(n,a){var r=a.data.login;t.login(r),e.history.push("/dashboard")},onError:function(e){bt(e)},variables:l}),h=Object(u.a)(f,2),p=h[0],g=h[1].loading,E=Object(et.a)(gn,{update:function(n,a){var r=a.data.googleSignIn;t.login(r),e.history.push("/dashboard")},onError:function(e){bt(e)}}),v=Object(u.a)(E,2),b=v[0],y=v[1];return c.a.createElement(tt.a,{className:"signin layout"},c.a.createElement(Mn,null),c.a.createElement(Vn,{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},c.a.createElement(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},c.a.createElement(kn.a,{name:"basic",initialValues:{remember:!0},onFinish:r},c.a.createElement("br",null),c.a.createElement(kn.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(Sn.a,{name:"email",placeholder:"Enter your email",prefix:c.a.createElement(zn.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(Sn.a.Password,{name:"password",placeholder:"Enter your password",prefix:c.a.createElement(Un.a,null),onChange:a})),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",type:"primary",htmlType:"submit",loading:g,disabled:d||y.loading},"Submit")))),c.a.createElement(lt.a,null),c.a.createElement(at.a,null,c.a.createElement(qn.a,{clientId:Hn,buttonText:"Continue With Google",onSuccess:function(e){m(!1),b({variables:{googleID:e.profileObj.googleId,googleEmail:e.profileObj.email,googleFirstName:e.profileObj.givenName,googleLastName:e.profileObj.familyName,googleProfilePicture:e.profileObj.imageUrl}})},onFailure:function(e){m(!1),console.error(e)},cookiePolicy:"single_host_origin",onRequest:function(){return m(!0)},disabled:d})),y.loading&&c.a.createElement(at.a,null,c.a.createElement(lt.a,null),"Redirecting, please wait...",c.a.createElement(Wn.a,null))),c.a.createElement(ht,null))},Kn=n(235),Jn=tt.a.Content,Qn=function(e){var t=Object(o.useContext)(B),n=Pn((function(){d()}),{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",userLevel:0}),a=n.onChange,r=n.onSubmit,l=n.values,i=Object(et.a)(En,{update:function(n,a){var r=a.data.register;t.login(r),e.history.push("/dashboard"),ot.a.info("Welcome To Face In!")},onError:function(e){bt(e)},variables:l}),s=Object(u.a)(i,2),d=s[0],m=s[1].loading,f=Object(et.a)(gn,{update:function(n,a){var r=a.data.googleSignIn;t.login(r),e.history.push("/dashboard")},onError:function(e){bt(e)}}),h=Object(u.a)(f,2),p=h[0],g=h[1],E=Object(o.useState)(!1),v=Object(u.a)(E,2),b=(v[0],v[1],Object(o.useState)(!1)),y=Object(u.a)(b,2),O=y[0],j=y[1];return c.a.createElement(tt.a,{className:"signin layout"},c.a.createElement(Mn,null),c.a.createElement(Jn,{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},c.a.createElement(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},c.a.createElement(kn.a,{name:"basic",initialValues:{remember:!0},onFinish:r},c.a.createElement("br",null),c.a.createElement(kn.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/,message:"Please enter valid email!"}]},c.a.createElement(Sn.a,{name:"email",placeholder:"Enter your email",prefix:c.a.createElement(zn.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your first name!"},{min:1,message:"Please enter more than 3 character"},{whitespace:!0,message:"Please do not insert whitespace only!"}]},c.a.createElement(Sn.a,{name:"firstName",placeholder:"Enter your first name",prefix:c.a.createElement(Vt.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your last name!"},{min:1,message:"Please enter more than 3 character"},{whitespace:!0,message:"Please do not insert whitespace only!"}]},c.a.createElement(Sn.a,{name:"lastName",placeholder:"Enter your last name",prefix:c.a.createElement(Vt.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"Staff ID",name:"cardID",rules:[{required:!0,message:"Please input your staff ID"}]},c.a.createElement(Sn.a,{name:"cardID",placeholder:"Enter your staff ID",onChange:a})),c.a.createElement(kn.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Please enter more than 6 character"},{whitespace:!0,message:"Please do not insert whitespace only!"}]},c.a.createElement(Sn.a.Password,{name:"password",placeholder:"Enter your password",prefix:c.a.createElement(Un.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"Confirm Password",name:"confirmPassword",rules:[{required:!0,message:"Please input your confirm password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},c.a.createElement(Sn.a.Password,{name:"confirmPassword",placeholder:"Enter your confirm password",prefix:c.a.createElement(Un.a,null),onChange:a})),c.a.createElement(kn.a.Item,{label:"Role",name:"userLevel",valuePropName:"checked"},c.a.createElement(Kn.default.Group,{name:"userLevel",value:l.userLevel,onChange:a},c.a.createElement(Kn.default,{value:0},"Student"),c.a.createElement(Kn.default,{value:1},"Professor"))),c.a.createElement(lt.a,null),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",type:"primary",htmlType:"submit",loading:m,disabled:O||g.loading},"Submit")))),c.a.createElement(lt.a,null),c.a.createElement(at.a,null,c.a.createElement(qn.a,{clientId:Hn,buttonText:"Continue With Google",onSuccess:function(e){j(!1),p({variables:{googleID:e.profileObj.googleId,googleEmail:e.profileObj.email,googleFirstName:e.profileObj.givenName,googleLastName:e.profileObj.familyName,googleProfilePicture:e.profileObj.imageUrl}})},onFailure:function(e){j(!1),console.error(e)},cookiePolicy:"single_host_origin",onRequest:function(){return j(!0)},disabled:O})),g.loading&&c.a.createElement(at.a,null,c.a.createElement(lt.a,null),"Redirecting, please wait...",c.a.createElement(Wn.a,null))),c.a.createElement(ht,null))},Zn=(n(638),tt.a.Content),Xn=function(){return c.a.createElement(tt.a,{className:"nofound layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(Zn,{className:"nofound__content"},c.a.createElement(jn.a,{className:"nofound__panel"},c.a.createElement(wn.a,{span:24,style:{marginBottom:"20px"}},'Page Not Found: "',window.location.pathname,'"'),c.a.createElement(wn.a,{span:24},c.a.createElement(rt.a,{type:"primary",className:"btn"},c.a.createElement(l.b,{to:"/dashboard"},"Home Page"))))),c.a.createElement(ht,null)))},ea=n(822),ta=n(66),na=n.n(ta),aa=(n(639),function(e){var t=e.notification;return c.a.createElement(ct.a,{className:t.checked?"notification":"unchecked_notification"},c.a.createElement("h1",{className:"notification__title"},t.title),c.a.createElement("hr",null),c.a.createElement("p",{className:"notification__content"},t.content),c.a.createElement("div",{className:"notification__seen"},t.checked?c.a.createElement(c.a.Fragment,null,c.a.createElement(ea.a,null)," seen"):c.a.createElement(c.a.Fragment,null,"new")),c.a.createElement("div",{className:"notification__createdAt"},na()(t.updatedAt).fromNow(!0)))}),ra=(n(640),function(e){var t=e.loading,n=e.payload,a=e.fetchedDone,r=e.allLoadedMessage,o=e.noItemMessage,l=e.handleFetchMore;return c.a.createElement("div",null,n.length>0&&!a&&c.a.createElement(rt.a,{onClick:l,disabled:t},"Load More",t?c.a.createElement(Wn.a,null):null),!t&&0!==(null===n||void 0===n?void 0:n.length)&&a&&c.a.createElement("div",{className:"allLoadedCard"},c.a.createElement("h3",null,r)),!t&&0===(null===n||void 0===n?void 0:n.length)&&c.a.createElement("p",null,o))}),oa=function(e){return e.loading&&c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(st.a,{tip:"Loading..."}))},ca=tt.a.Content,la=function(){var e=Object(o.useContext)(he),t=e.notifications,n=e.fetchedDone,a=e.setFetchedDone,r=e.loadNotifications,l=e.uncheckedNotificationCount,i=e.setUncheckedNotificationCount,u=Object(et.b)(St,{onError:function(e){bt(e)},variables:{limit:10},notifyOnNetworkStatusChange:!0}),d=u.data,m=u.loading,f=(u.error,u.fetchMore);u.networkStatus;Object(o.useEffect)((function(){if(d){r(d.getNotifications.notifications);var e=0;d.getNotifications.notifications.map((function(t){t.checked||e++,setTimeout((function(){return t.checked=!0}),2e3)})),l>=e&&i(l-e),d.getNotifications.hasNextPage?a(!1):a(!0)}}),[d]);return c.a.createElement("div",{className:"notifications"},c.a.createElement(tt.a,{className:"notifications layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Notification",link:"/notification"}]}),c.a.createElement(ca,{className:"notifications__content"},c.a.createElement(ct.a,null,t&&t.map((function(e){return c.a.createElement(aa,{key:e._id,notification:e})})),c.a.createElement(oa,{loading:m}),c.a.createElement(ra,{loading:m,payload:t,fetchedDone:n,allLoadedMessage:"All Notification Loaded",noItemMessage:"No Notification...",handleFetchMore:function(){f({variables:{limit:10,cursor:t[t.length-1]._id},onError:function(e){bt(e)},updateQuery:function(e,t){var n=t.fetchMoreResult;n.getNotifications.hasNextPage||a(!0);var r=0;return n.getNotifications.notifications.map((function(e){return e.checked||r++,null})),l>=r&&i(l-r),{getNotifications:{__typename:"Notifications",notifications:[].concat(Object(s.a)(e.getNotifications.notifications),Object(s.a)(n.getNotifications.notifications)),hasNextPage:n.getNotifications.hasNextPage}}}})}}))),c.a.createElement(ht,null))))},ia=(n(641),tt.a.Content),ua=function(){var e=Object(o.useContext)(B),t=e.user,n=e.avatarColor,a=e.editProfile,r=Object(o.useState)(null),l=Object(u.a)(r,2),i=l[0],s=l[1],m=Object(et.a)(bn,{update:function(e,t){var n=t.data;a(n.editProfile),ot.a.success("Edit Success!")},onError:function(e){bt(e)}}),f=Object(u.a)(m,2),h=f[0],p=f[1].loading;return c.a.createElement("div",{className:"addCourse"},c.a.createElement(tt.a,{className:" layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Profile",link:"/profile"}]}),c.a.createElement(ia,{className:"profile__content"},c.a.createElement(ct.a,{className:"profile__card"},c.a.createElement("div",{className:"profile__picture__container"},c.a.createElement(nt.a,{src:i||t.profilePictureURL,size:200,className:"profile__picture",style:!t.profilePictureURL&&Object(d.a)(Object(d.a)({},n),{},{fontSize:"100px"})},t.firstName[0]),c.a.createElement("label",{className:"profile__picture__label",htmlFor:"files"},"Change Profile Picture"),c.a.createElement("input",{className:"profile__picture__input",type:"file",id:"files",onChange:function(e){!function(e){if(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){s(t.result)}}}(e.target.files[0])},accept:"image/x-png,image/gif,image/jpeg"})),c.a.createElement(kn.a,{className:"profile__form",name:"basic",onFinish:function(e){h({variables:Object(d.a)(Object(d.a)({},e),{},{profilePicture:i})})},initialValues:{firstName:t.firstName,lastName:t.lastName,cardID:t.cardID}},c.a.createElement(kn.a.Item,{label:"Email",name:"email"},c.a.createElement(Sn.a,{name:"email",defaultValue:t.email,disabled:!0})),c.a.createElement(kn.a.Item,{label:"Role",name:"Role"},c.a.createElement(Sn.a,{name:"role",defaultValue:"".concat(0===t.userLevel?"Student":"Lecturer"),disabled:!0})),c.a.createElement(kn.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input first name!"}]},c.a.createElement(Sn.a,{name:"firstName",placeholder:"Enter your first name"})),c.a.createElement(kn.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please enter your last name!"}]},c.a.createElement(Sn.a,{name:"lastName",placeholder:"Enter your last name"})),c.a.createElement(kn.a.Item,{label:0===t.userLevel?"Matric Number":"Staff ID",name:"cardID",rules:[{required:!0,message:"Please your ".concat(0===t.userLevel?"Matric Number":"Staff ID","!")}]},c.a.createElement(Sn.a,{name:"cardID",placeholder:"Enter your ".concat(0===t.userLevel?"Matric Number":"Staff ID")})),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",type:"primary",htmlType:"submit",disabled:p},"Submit ",p?c.a.createElement(Wn.a,null):null))))),c.a.createElement(ht,null))))},sa=n(823),da=n(824),ma=n(825),fa=n(826),ha=n(422),pa=n(109),ga=Et.a.Title,Ea=tt.a.Content,va=function(e){var t,n=Object(o.useContext)(B).user,a=Object(o.useState)([]),r=Object(u.a)(a,2),i=r[0],s=r[1],m=[{title:c.a.createElement("strong",null,"Bil"),dataIndex:"bil",key:"bil",render:function(e){return c.a.createElement(Ln.a,{loading:D},e)},sorter:{compare:function(e,t){return e.bil-t.bil},multiple:2}},{key:"room",title:c.a.createElement("strong",null,"Attendance Room ID"),dataIndex:"room",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:D},e)},sorter:function(e,t){return e.mode.localeCompare(t.mode)}},{key:"date",title:c.a.createElement("strong",null,"Date"),dataIndex:"date",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:D},e)},sorter:function(e,t){return e.date.localeCompare(t.date)}},{key:"time",title:c.a.createElement("strong",null,"Time"),dataIndex:"time",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:D},e)},sorter:function(e,t){return e.time.localeCompare(t.time)}},{key:"mode",title:c.a.createElement("strong",null,"Mode"),dataIndex:"mode",align:"center",render:function(e){return c.a.createElement(Ln.a,{active:!0,loading:D},e)},sorter:function(e,t){return e.mode.localeCompare(t.mode)}},{title:c.a.createElement("strong",null,"Open"),dataIndex:"open",key:"open",render:function(e){return c.a.createElement(ha.a,{color:"On"==e?"#0c8":"#f00"},e," ","On"==e?c.a.createElement(sa.a,null):c.a.createElement(da.a,null))},align:"center",sorter:function(e,t){return e.open.localeCompare(t.open)}},{title:c.a.createElement("strong",null,"Action"),dataIndex:1===n.userLevel?"action":"status",render:function(e,t){return c.a.createElement(Ln.a,{loading:D,active:!0},c.a.createElement(pa.a,{placement:"topLeft",title:"Go to Room"},c.a.createElement(rt.a,{onClick:function(){return T(t)},style:{margin:"10px"},icon:c.a.createElement(ma.a,null)})),c.a.createElement(pa.a,{placement:"topLeft",title:"History Record"},c.a.createElement(rt.a,{onClick:function(){return F(t)},style:{margin:"10px"},icon:c.a.createElement(fa.a,null)})),1==n.userLevel&&c.a.createElement(pa.a,{placement:"topLeft",title:"Delete Record"},c.a.createElement(rt.a,{onClick:function(){return $(t)},loading:w.key==t.key&&A.loading,disabled:w.key==t.key&&A.loading,style:{margin:"10px"},type:"danger",icon:c.a.createElement(Dn.a,null)})))},align:"center"}],f=Object(o.useState)(!1),h=Object(u.a)(f,2),p=h[0],g=h[1],E=Object(o.useState)({pageSize:5,current:1,total:0}),v=Object(u.a)(E,2),b=v[0],y=v[1],O=Object(o.useState)({}),j=Object(u.a)(O,2),w=j[0],x=j[1],I=Object(et.b)(_t,{onCompleted:function(e){I.refetch(),y(Object(d.a)(Object(d.a)({},b),{},{total:e.getAttendanceListCountInCourse}))},variables:{courseID:e.match.params.id},onError:function(e){bt(e)}}),C=Object(et.b)(At,{onCompleted:function(e){var t,n;y(Object(d.a)(Object(d.a)({},b),{},{total:null===(t=I.data)||void 0===t?void 0:t.getAttendanceListCountInCourse})),(null===(n=I.data)||void 0===n?void 0:n.getAttendanceListCountInCourse)-(b.current-1)*b.pageSize<=0&&1!==b.current&&y((function(e){return Object(d.a)(Object(d.a)({},e),{},{current:e.current-1})}))},onError:function(e){bt(e)},variables:{courseID:e.match.params.id,currPage:b.current,pageSize:b.pageSize},notifyOnNetworkStatusChange:!0}),N=C.data,D=C.loading,L=(C.error,C.refetch),k=Object(et.a)(ln,{onCompleted:function(e){g(!1),ot.a.success("Delete Success"),I.refetch(),L()},onError:function(e){bt(e)},variables:{attendanceID:w.key}}),S=Object(u.a)(k,2),_=S[0],A=S[1];Object(o.useEffect)((function(){s((null===N||void 0===N?void 0:N.getAttendanceListInCourse.attendanceList)||[])}),[N]);var F=function(t){e.history.push("/course/".concat(e.match.params.id,"/attendanceList/").concat(t.key))},T=function(t){e.history.push("/course/".concat(e.match.params.id,"/attendanceRoom/").concat(t.key))},$=function(e){x(e),g(!0)};return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Home",link:"/dashboard"},{name:"Course: ".concat(e.match.params.id),link:"/course/".concat(e.match.params.id)},{name:"Attendance List",link:"/course/".concat(e.match.params.id,"/attendanceList")}]}),c.a.createElement(Ea,null,c.a.createElement(ct.a,null,c.a.createElement(at.a,{direction:"vertical",className:"width100"},N&&c.a.createElement(ga,{level:4},"Course:"," ","".concat(N.getAttendanceListInCourse.course.code," ").concat(N.getAttendanceListInCourse.course.name," (").concat(N.getAttendanceListInCourse.course.session,")")),c.a.createElement(lt.a,null),c.a.createElement("h1",null,"Total Attendance:"," ",(null===(t=I.data)||void 0===t?void 0:t.getAttendanceListCountInCourse)||0),1===n.userLevel&&c.a.createElement(rt.a,{style:{float:"right"},type:"primary",className:"btn"},c.a.createElement(l.b,{to:"/course/".concat(e.match.params.id,"/attendanceForm")},"Create Attendance")),c.a.createElement(rt.a,{style:{float:"right"},icon:c.a.createElement(Xe.a,null),disabled:D,loading:D,onClick:function(){return L()}},"Refresh Table"),c.a.createElement(it.a,{scroll:{x:"max-content"},loading:D,pagination:b,dataSource:function(e){var t=[];return e.map((function(e,n){console.log(e);var a={key:e._id,bil:!D&&b.pageSize*(b.current-1)+n+1,date:na()(e.date).format("DD/MM/YYYY"),time:na()(e.time).format("HH:mm"),room:e._id,mode:e.mode,open:e.isOn?"On":"Off"};t.push(a)})),t}(i),onChange:function(e){y(e)},columns:m}),c.a.createElement(mt,{title:"Delete Attendance",action:P.action.delete,itemType:P.name,visible:p,loading:A.loading,handleOk:function(e){_()},handleCancel:function(e){g(!1)},payload:w})))),c.a.createElement(ht,null)))},ba=n(172),ya=function(e){var t=e.attendeesLength,n=e.absenteesLength,a=Object(o.useState)([{name:"Attendees",value:t},{name:"Absentees",value:n}]),r=Object(u.a)(a,2),l=r[0],i=r[1],s=Object(o.useState)(0),d=Object(u.a)(s,2),m=d[0],f=d[1],h=Object(o.useState)({width:window.innerWidth,height:window.innerHeight}),p=Object(u.a)(h,2),g=p[0],E=p[1],v=["#00C49F","#ee8888"];Object(o.useEffect)((function(){window.addEventListener("resize",(function(){E({width:window.innerWidth,height:window.innerHeight})}))}),[]),Object(o.useEffect)((function(){i([{name:"Attendees",value:t},{name:"Absentees",value:n}])}),[t,n]);return c.a.createElement(ba.c,{width:g.width,height:g.height/2},c.a.createElement(ba.b,{activeIndex:m,activeShape:function(e){var t=Math.PI/180,n=e.cx,a=e.cy,r=e.midAngle,o=e.innerRadius,l=e.outerRadius,i=e.startAngle,u=e.endAngle,s=e.fill,d=e.payload,m=e.percent,f=e.value,h=Math.sin(-t*r),p=Math.cos(-t*r),g=n+(l+10)*p,E=a+(l+10)*h,v=n+(l+30)*p,b=a+(l+30)*h,y=v+22*(p>=0?1:-1),O=b,j=p>=0?"start":"end";return c.a.createElement("g",null,c.a.createElement("text",{x:n,y:a,dy:8,textAnchor:"middle",fill:s},d.name),c.a.createElement(ba.d,{cx:n,cy:a,innerRadius:o,outerRadius:l,startAngle:i,endAngle:u,fill:s}),c.a.createElement(ba.d,{cx:n,cy:a,startAngle:i,endAngle:u,innerRadius:l+6,outerRadius:l+10,fill:s}),c.a.createElement("path",{d:"M".concat(g,",").concat(E,"L").concat(v,",").concat(b,"L").concat(y,",").concat(O),stroke:s,fill:"none"}),c.a.createElement("circle",{cx:y,cy:O,r:2,fill:s,stroke:"none"}),c.a.createElement("text",{x:y+12*(p>=0?1:-1),y:O,textAnchor:j,fill:"#333"},"".concat(f)),c.a.createElement("text",{x:y+12*(p>=0?1:-1),y:O,dy:18,textAnchor:j,fill:"#999"},"(".concat((100*m).toFixed(2),"%)")))},data:l,dataKey:"value",cx:3*g.width/7,cy:200,innerRadius:70,outerRadius:100,fill:"#8884d8",onMouseEnter:function(e,t){f(t)}},l.map((function(e,t){return c.a.createElement(ba.a,{key:"cell-".concat(t),fill:v[t%v.length]})}))))},Oa=Et.a.Title,ja=tt.a.Content,wa=function(e){var t=[{title:c.a.createElement("strong",null,"Avatar"),dataIndex:"avatar",key:"avatar",align:"center",width:"5%"},{key:"cardID",title:c.a.createElement("strong",null,"Matric Number"),dataIndex:"cardID",align:"center",sorter:function(e,t){return e.cardID.localeCompare(t.cardID)}},{key:"name",title:c.a.createElement("strong",null,"Name"),dataIndex:"name",align:"center",sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:c.a.createElement("strong",null,"Status"),dataIndex:"status",render:function(e,t){return c.a.createElement(ha.a,{color:"Absent"===t.status?"volcano":"green"},t.status)},align:"center",sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:c.a.createElement("strong",null,"Check In Date"),dataIndex:"checkin_date",render:function(e,t){return t.checkin_date},align:"center",sorter:function(e,t){return e.checkin_date.localeCompare(t.checkin_date)}},{title:c.a.createElement("strong",null,"Check In Time"),dataIndex:"checkin_time",render:function(e,t){return t.checkin_time},align:"center",sorter:function(e,t){return e.checkin_time.localeCompare(t.checkin_time)}}],n=Object(o.useState)([]),a=Object(u.a)(n,2),r=a[0],l=a[1],i=Object(o.useState)([]),s=Object(u.a)(i,2),d=s[0],m=s[1],f=Object(o.useState)([]),h=Object(u.a)(f,2),p=h[0],g=h[1],E=Object(o.useState)([]),v=Object(u.a)(E,2),b=(v[0],v[1],Object(o.useState)("")),y=Object(u.a)(b,2),O=y[0],j=y[1],w=Object(et.b)(Pt,{onError:function(t){e.history.push("/course/".concat(e.match.params.courseID,"/attendanceList")),bt(t)},variables:{attendanceID:e.match.params.attendanceID},notifyOnNetworkStatusChange:!0}),x=Object(et.b)(It,{onError:function(t){e.history.push("/dashboard"),bt(t)},variables:{id:e.match.params.courseID},notifyOnNetworkStatusChange:!0}),I=Object(et.b)(Ft,{onError:function(e){bt(e)},variables:{attendanceID:e.match.params.attendanceID},notifyOnNetworkStatusChange:!0});Object(o.useEffect)((function(){x.data&&l(x.data.getParticipants)}),[x.data]),Object(o.useEffect)((function(){if(I.data){var e=r.filter((function(e){return delete e.attend_at,0==I.data.getTrxListInAttendance.filter((function(t){return e._id==t.studentID})).length})),t=r.filter((function(e){var t=I.data.getTrxListInAttendance.filter((function(t){return e._id==t.studentID}));return console.log("result",t),t.length>=1&&Object.assign(e,{attend_at:t[0].createdAt}),t.length>=1}));g(e),m(t)}return function(){g([]),m([])}}),[r,I.data]),Object(o.useEffect)((function(){return j("".concat(d.length,"/").concat(r.length)),function(){j("")}}),[d,p,r]);return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Home",link:"/dashboard"},{name:"Course: ".concat(e.match.params.courseID),link:"/course/".concat(e.match.params.courseID)},{name:"Attendance List",link:"/course/".concat(e.match.params.courseID,"/attendanceList")},{name:"Attendance Record: ".concat(e.match.params.attendanceID),link:"/course/".concat(e.match.params.courseID,"/attendanceList/").concat(e.match.params.attendanceID)}]}),c.a.createElement(ja,null,c.a.createElement(ct.a,null,c.a.createElement(at.a,{direction:"vertical",className:"width100"},w.data&&c.a.createElement(ct.a,null,c.a.createElement(Oa,{level:4},"Course: ".concat(w.data.getAttendance.course.shortID," - ").concat(w.data.getAttendance.course.code," - ").concat(w.data.getAttendance.course.name," - ").concat(w.data.getAttendance.course.session)),c.a.createElement("p",null,"Date:"," ",c.a.createElement("strong",null,na()(w.data.getAttendance.date).format("DD/MM/YYYY"))),c.a.createElement("p",null,"Time:"," ",c.a.createElement("strong",null,na()(w.data.getAttendance.time).format("h:mm a")))),c.a.createElement(lt.a,null),c.a.createElement(ct.a,{style:{display:"flex",justifyContent:"center"}}," ",c.a.createElement("p",null,c.a.createElement("strong",null,"Attendance Transaction:")," ",O||"-"),c.a.createElement("br",null)),x.data?c.a.createElement(ya,{attendeesLength:d.length,absenteesLength:p.length}):c.a.createElement(oa,{loading:x.loading}),c.a.createElement(rt.a,{style:{float:"right"},icon:c.a.createElement(Xe.a,null),disabled:w.loading,loading:w.loading,onClick:function(){return w.refetch()}},"Refresh Table"),c.a.createElement(it.a,{scroll:{x:"max-content"},loading:x.loading,pagination:{pageSize:5},dataSource:x.data?function(e,t){var n=[];return console.log(t),e.map((function(e,a){var r={key:e._id,avatar:c.a.createElement(nt.a,{src:e.profilePictureURL,style:{backgroundColor:"rgb(".concat(150*Math.random()+30,", ").concat(150*Math.random()+30,", ").concat(150*Math.random()+30,")")}},e.firstName[0]),cardID:e.cardID,name:e.firstName+" "+e.lastName,status:t.find((function(t){return t._id==e._id}))?"Absent":"Attend",checkin_date:e.attend_at?na()(e.attend_at).format("DD/MM/YYYY"):"-",checkin_time:e.attend_at?na()(e.attend_at).format("h:mm:ss a"):"-"};n.push(r)})),n}(r,p):[],columns:t})))),c.a.createElement(ht,null)))},xa=n(69),Ia=n(188),Ca=n(808),Na=n(87);function Da(){Da=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function La(e,t){return ka.apply(this,arguments)}function ka(){return(ka=Object(xa.a)(Da().mark((function e(t,n){var a;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/attendvanc/models",e.prev=1,t("Loading Face Detector"),e.next=5,Na.h(a);case 5:return t("Loading 68 Facial Landmark Detector"),e.next=8,Na.f(a);case 8:return t("Loading Feature Extractor"),e.next=11,Na.g(a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n("Model loading failed. Please contact me about the bug:attendlytical@gmail.com");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Sa(e){return _a.apply(this,arguments)}function _a(){return(_a=Object(xa.a)(Da().mark((function e(t){var n,a,r,o,c,l,i=arguments;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:512,a=.8,r=new Na.c({inputSize:n,scoreThreshold:a}),o=!0,e.next=6,Na.e(t);case 6:return c=e.sent,e.next=9,Na.d(c,r).withFaceLandmarks(o).withFaceDescriptors();case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=Object(xa.a)(Da().mark((function e(t,n){var a,r;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return new Na.b(e.student._id,e.facePhotos.map((function(e){return new Float32Array(e.faceDescriptor.match(/-?\d+(?:\.\d+)?/g).map(Number))})))})),r=new Na.a(a,n),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(){return!!Na.i.ssdMobilenetv1.params}function Ta(){return!!Na.i.faceRecognitionNet.params}function $a(){return!!Na.i.faceLandmark68TinyNet.params}var Ra=n(242),Ma=n.n(Ra),Ga=function(e){var t=e.loadingMessage;return c.a.createElement(st.a,{tip:t,style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"150px"},indicator:c.a.createElement("div",{style:{marginRight:"50px"}},c.a.createElement(Wn.a,{style:{fontSize:"32px"}}))})},za=function(e){var t=e.errorMessage;return c.a.createElement(ct.a,{style:{opacity:.8}},c.a.createElement("p",null,"Face Detector:"," ",Fa()?c.a.createElement("strong",null,"Loaded"):t&&t.length>0?c.a.createElement("span",{style:{color:"red",fontWeight:"bold"}},"ERROR"):c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Loading")," ",c.a.createElement(Wn.a,null))),c.a.createElement("p",null,"Facial Landmark Detector:"," ",$a()?c.a.createElement("strong",null,"Loaded"):t&&t.length>0?c.a.createElement("span",{style:{color:"red",fontWeight:"bold"}},"ERROR"):c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Loading")," ",c.a.createElement(Wn.a,null))),c.a.createElement("p",null,"Feature Extractor:"," ",Ta()?c.a.createElement("strong",null,"Loaded"):t&&t.length>0?c.a.createElement("span",{style:{color:"red",fontWeight:"bold"}},"ERROR"):c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Loading")," ",c.a.createElement(Wn.a,null))))};function Ua(){Ua=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}Et.a.Title;var Wa=tt.a.Content,Ya=Ia.a.Option,qa=function(e){var t,n=e.participants,a=e.faceMatcher,r=e.facePhotos,l=Object(o.useContext)(de).threshold,i=Object(o.useRef)(),s=Object(o.useRef)(),m=Object(o.useState)(),f=Object(u.a)(m,2),h=f[0],p=f[1],g=Object(o.useState)([]),E=Object(u.a)(g,2),v=E[0],b=E[1],y=Object(o.useState)(T),O=Object(u.a)(y,2),j=O[0],w=O[1],x=Object(o.useState)($),I=Object(u.a)(x,2),C=I[0],N=I[1],D=Object(o.useState)(!1),L=Object(u.a)(D,2),k=L[0],S=L[1],_=Object(o.useState)(""),P=Object(u.a)(_,2),A=P[0],M=P[1],G=Object(o.useState)(""),z=Object(u.a)(G,2),U=z[0],W=z[1],Y=Object(o.useState)(null),q=Object(u.a)(Y,2),H=q[0],V=q[1],B=Object(o.useState)(""),K=Object(u.a)(B,2),J=K[0],Q=K[1],Z=Object(et.a)(On,{update:function(e,t){var n=t.data;""!=n.createTrx&&ot.a.success(n.createTrx)},onError:function(e){bt(e)}}),X=Object(u.a)(Z,1)[0];Object(o.useEffect)((function(){function e(){return(e=Object(xa.a)(Ua().mark((function e(){return Ua().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La(M,W);case 2:S(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Fa()&&$a()&&Ta()?S(!0):function(){e.apply(this,arguments)}()}),[k]),Object(o.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then(function(){var e=Object(xa.a)(Ua().mark((function e(t){var n;return Ua().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter((function(e){return"videoinput"===e.kind}));case 2:n=e.sent,b(Object(d.a)(Object(d.a)({},v),{},{inputDevice:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){function t(){if("undefined"!==typeof i.current&&null!==i.current&&4===i.current.video.readyState){var t=i.current.video.videoWidth,r=i.current.video.videoHeight;s.current.width=t,s.current.height=r,Sa(i.current.getScreenshot(),160).then((function(e){V(e),Q("")})).catch((function(e){Q("Preparing face matcher and device setup, please wait...")}));var o=s.current.getContext("2d");!function(e,t,n,a){e&&e.forEach((function(e){var r=e.detection.box,o=r.x,c=r.y,l=r.width,i=r.height,u=e.landmarks._positions;console.log(u);var s=t.findBestMatch(e.descriptor);if("unknown"!=s._label){var d=n.filter((function(e){return e.student._id==s._label}));console.log(d),s._label=d[0].student.firstName+" "+d[0].student.lastName+" ("+d[0].student.cardID+")"}a.font="normal 18px Gotham, Helvetica Neue, sans-serif",a.lineWidth=2,a.strokeStyle="unknown"==s._label?"#E00":"#0E0",u.map((function(e){a.beginPath(),a.fillText(s._label,o,c+i+20),a.fillStyle="unknown"==s._label?"#E00":"#0E0",a.arc(e._x,e._y,3,0,2*Math.PI),a.closePath(),a.fill()})),a.beginPath(),a.fillStyle="unknown"==s._label?"#E00":"#0E0",a.rect(o,c,l,i),a.fillText(s._label,o,c+i+20),a.fillText("L2: ".concat(s.distance.toFixed(2)),o,c),a.stroke()}))}(H,a,n,o),H&&(console.log("Now got full desc"),H.map((function(t){var n=a.findBestMatch(t.descriptor);console.log(n),"unknown"!=n._label&&(X({variables:{attendanceID:e.match.params.attendanceID,studentID:n._label}}),console.log("Saving in db now"))})))}}var r=setInterval((function(){t()}),700);return function(){return clearInterval(r)}}));return c.a.createElement(Wa,null,c.a.createElement(ct.a,null,c.a.createElement(kn.a,null,c.a.createElement(kn.a.Item,{label:"Webcam"},c.a.createElement(Ia.a,{defaultValue:"Select Webcam",style:{width:500},onChange:function(e){p(e)}},null===v||void 0===v||null===(t=v.inputDevice)||void 0===t?void 0:t.map((function(e){return c.a.createElement(Ya,{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement(kn.a.Item,{label:"Webcam Size"},c.a.createElement(Ia.a,{defaultValue:F,style:{width:200},onChange:function(e){R.map((function(t){e===t.label&&(w(t.width),N(t.height))}))}},R.map((function(e){return c.a.createElement(Ya,{key:e.label,value:e.label},e.label)}))))),c.a.createElement(ct.a,null,c.a.createElement(jn.a,null,"Face Descriptor Matcher: ",r.length),c.a.createElement(jn.a,null,"Threshold Distance: ",l)),0===r.length&&c.a.createElement("p",{className:"alert"},"No have any face matcher."),c.a.createElement(za,{errorMessage:U}),k?U?c.a.createElement("div",{className:"error"},U):c.a.createElement("div",null):c.a.createElement(Ga,{loadingMessage:A}),k&&0==U.length&&c.a.createElement(ct.a,{className:"takeAttendance__card__webcam"},c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,J),c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(Ma.a,{muted:!0,ref:i,audio:!1,width:j,height:C,screenshotFormat:"image/jpeg",videoConstraints:{deviceId:h},mirrored:!0}),c.a.createElement("canvas",{ref:s,style:{position:"absolute",textAlign:"center",zindex:8,width:j,height:C}}))))))},Ha=n(807),Va=function(e){var t=e.studentList,n=Object(o.useState)({}),a=Object(u.a)(n,2),r=a[0],l=a[1];Object(o.useEffect)((function(){t.map((function(e){l(Object(d.a)(Object(d.a)({},r),{},Object(_n.a)({},e.student._id,!1)))}))}),[]);return c.a.createElement(Ha.b,{pagination:{pageSize:10},itemLayout:"horizontal",dataSource:t,renderItem:function(e){var t,n,a,o;return c.a.createElement(Ha.b.Item,{key:e.student._id,style:{display:"flex",justifyContent:"center"}},c.a.createElement(Ha.b.Item.Meta,{avatar:c.a.createElement(nt.a,{src:e.student.profilePictureURL,icon:c.a.createElement(Vt.a,null)}),title:c.a.createElement("span",{style:{cursor:"pointer"}},e.student.firstName," ",e.student.lastName," (",e.student.cardID,")","  "),description:c.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.a.createElement("div",null,c.a.createElement("p",null,"Check in: ",e.attend_at?na()(e.attend_at).format("DD/MM/YYYY h:mm:ss a"):"-")),c.a.createElement("div",null,"Number of sample photo:"," ",0===(null===(t=e.facePhotos)||void 0===t?void 0:t.length)?c.a.createElement("span",{style:{color:"red",fontWeight:900,fontSize:"20px"}},"0"):(null===(n=e.facePhotos)||void 0===n?void 0:n.length)||c.a.createElement("span",{style:{color:"red",fontWeight:900,fontSize:"20px"}},"0")),(null===(a=e.facePhotos)||void 0===a?void 0:a.length)>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(rt.a,{onClick:function(){return t=e.student._id,void l(Object(d.a)(Object(d.a)({},r),{},Object(_n.a)({},t,!r[t])));var t}},r[e.student._id]?"Hide Photo":"Show Photo")),r[e.student._id]&&c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"space-between",flexWrap:"wrap"}},null===(o=e.facePhotos)||void 0===o?void 0:o.map((function(t){return c.a.createElement("div",{key:t._id},c.a.createElement("img",{style:{width:"100px",height:"100px",margin:"10px"},"data-src":t.photoURL,className:"lazyload",src:"".concat("/attendvanc","/img/loader.gif"),alt:e.firstName}))})))))}))}})},Ba=function(e){var t=e.participants,n=Object(et.b)(Ft,{onError:function(e){bt(e)},pollInterval:2e3,variables:{attendanceID:e.match.params.attendanceID}}),a=Object(o.useState)([]),r=Object(u.a)(a,2),l=r[0],i=r[1],s=Object(o.useState)([]),d=Object(u.a)(s,2),m=d[0],f=d[1];return Object(o.useEffect)((function(){if(console.log(t),n.data){var e=t.filter((function(e){return 0==n.data.getTrxListInAttendance.filter((function(t){return e.student._id==t.studentID})).length}));console.log(e);var a=t.filter((function(e){var t=n.data.getTrxListInAttendance.filter((function(t){return e.student._id==t.studentID}));return t.length>=1&&Object.assign(e,{attend_at:t[0].createdAt}),t.length>=1}));a.sort((function(e,t){return new Date(t.attend_at)-new Date(e.attend_at)})),f(e),i(a)}}),[t,n.data]),c.a.createElement(ct.a,null,c.a.createElement("p",{style:{textAlign:"center",fontWeight:900,fontSize:"20px"}},"Attendance Transaction: ",l.length,"/",t.length),c.a.createElement(jn.a,null,c.a.createElement(wn.a,{span:12},c.a.createElement(ct.a,null,c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{style:{fontWeight:900,fontSize:"15px"}},"Absentee: ",m.length),n.loading?c.a.createElement(st.a,{tip:"Fetching Absentees..."}):c.a.createElement(Va,{studentList:m})))),c.a.createElement(wn.a,{span:12},c.a.createElement(ct.a,null,c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{style:{fontWeight:900,fontSize:"15px"}},"Attendee: ",l.length),n.loading?c.a.createElement(st.a,{tip:"Fetching Attendees..."}):c.a.createElement(Va,{studentList:l}))))))};function Ka(){Ka=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var Ja=Ia.a.Option,Qa=Et.a.Title,Za=function(e){var t=Object(o.useContext)(B).user,n=Object(o.useContext)(de),a=n.threshold,r=(n.setFaceThresholdDistance,Object(o.useState)("Remote")),l=Object(u.a)(r,2),i=l[0],d=l[1],m=Object(o.useState)(!0),f=Object(u.a)(m,2),h=f[0],p=f[1],g=Object(o.useState)([]),E=Object(u.a)(g,2),v=E[0],b=E[1],y=Object(o.useState)([]),O=Object(u.a)(y,2),j=O[0],w=O[1],x=Object(o.useState)(null),I=Object(u.a)(x,2),C=I[0],N=I[1],D=Object(o.useState)([]),L=Object(u.a)(D,2),k=(L[0],L[1]),S=Object(o.useState)({}),_=Object(u.a)(S,2),P=_[0],A=_[1],F=Object(et.b)(Lt,{onError:function(e){console.log(e),bt(e)},variables:{courseID:e.match.params.courseID}}),T=F.data;F.loading,F.error;Object(o.useEffect)((function(){T&&(A(T.getFaceMatcherInCourse.course),b(T.getFaceMatcherInCourse.matcher),k(T.getFaceMatcherInCourse.matcher),T.getFaceMatcherInCourse.matcher.map((function(e){e.facePhotos.map((function(e){return w((function(t){return[].concat(Object(s.a)(t),[e])}))}))})),0===T.getFaceMatcherInCourse.matcher.length&&ot.a.info("Course do not have any participant yet!"))}),[T,v]);var $=Object(et.b)(Pt,{onError:function(t){e.history.push("/course/".concat(e.match.params.courseID,"/attendanceList")),bt(t)},pollInterval:2e3,variables:{attendanceID:e.match.params.attendanceID}});Object(o.useEffect)((function(){$.data&&(d($.data.getAttendance.mode),ot.a.info("Attendance Mode: "+$.data.getAttendance.mode),p($.data.getAttendance.isOn),$.data.getAttendance.isOn?ot.a.info("Attendance is currently opened"):0==t.userLevel?ot.a.info("Attendance had been closed by the host."):ot.a.info("You closed the attendance, no transaction will be recorded"))}),[$.data]),Object(o.useEffect)((function(){function e(){return(e=Object(xa.a)(Ka().mark((function e(){var t,n;return Ka().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T.getFaceMatcherInCourse.matcher.length>0&&j.length>0)){e.next=6;break}return t=T.getFaceMatcherInCourse.matcher.filter((function(e){return e.facePhotos.length>0})),e.next=4,Pa(t,a);case 4:n=e.sent,N(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}T&&function(){e.apply(this,arguments)}()}),[T,j,a]);var R=Object(et.a)(on,{onCompleted:function(){var e=Object(xa.a)(Ka().mark((function e(t){return Ka().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.editAttendanceMode.mode),ot.a.success("Set Mode To ".concat(t.editAttendanceMode.mode));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){bt(e)}}),G=Object(u.a)(R,2),z=G[0],U=G[1],W=Object(et.a)(cn,{onCompleted:function(){var e=Object(xa.a)(Ka().mark((function e(t){return Ka().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.editAttendanceOnOff.isOn),ot.a.success("Attendance is ".concat(1==t.editAttendanceOnOff.isOn?" on":" off"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){bt(e)}}),Y=Object(u.a)(W,2),q=Y[0],H=Y[1],V=[{name:"Home",link:"/dashboard"},{name:"Course: ".concat(e.match.params.courseID),link:"/course/".concat(e.match.params.courseID)},{name:"Attendance List",link:"/course/".concat(e.match.params.courseID,"/attendanceList")},{name:"Attendance Room: ".concat(e.match.params.attendanceID),link:"/course/".concat(e.match.params.courseID,"/attendanceRoom/").concat(e.match.params.attendanceID)}],K=tt.a.Content;return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:V}),c.a.createElement(K,null,c.a.createElement(ct.a,{title:"F2F"==i?c.a.createElement(Qa,{level:4},"F2F Attendance"):c.a.createElement(Qa,{level:4},"Remote Attendance")},T&&c.a.createElement(Qa,{level:4},"Course:"," ",P.code+"-"+P.name+"("+P.session+")")),1==t.userLevel&&c.a.createElement(ct.a,{title:c.a.createElement(Qa,{level:4},"Attendance Setting")},c.a.createElement(kn.a,null,c.a.createElement(kn.a.Item,{label:"Mode"},U.loading?c.a.createElement(Wn.a,{style:{fontSize:"25px",color:"blue"}}):c.a.createElement(Ia.a,{value:i,onChange:function(t){z({variables:{attendanceID:e.match.params.attendanceID,mode:t}})}},M.map((function(e){return c.a.createElement(Ja,{key:e,value:e},e)})))),c.a.createElement(kn.a.Item,{label:"Open"},H.loading?c.a.createElement(Wn.a,{style:{fontSize:"25px",color:"blue"}}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ca.a,{onChange:function(t){q({variables:{attendanceID:e.match.params.attendanceID,isOn:t}})},checked:h}),h?" (Attendance transaction activate)":" (Attendance transaction deactivate)")))),$.data&&h&&"F2F"==i&&1==t.userLevel&&c.a.createElement(qa,Object.assign({},e,{faceMatcher:C,facePhotos:j,participants:v})),$.data&&h&&"Remote"==i&&0==t.userLevel&&c.a.createElement(qa,Object.assign({},e,{faceMatcher:C,facePhotos:j,participants:v})),!h&&0==t.userLevel&&c.a.createElement(ct.a,null,c.a.createElement("p",null,"The host has closed the attendance")),c.a.createElement(oa,{loading:$.loading}),c.a.createElement(Ba,Object.assign({},e,{participants:v}))),c.a.createElement(ht,null)))},Xa=tt.a.Content,er=Et.a.Title,tr=function(e){var t=Object(o.useContext)(B),n=t.user,a=t.login,r=t.logout,l=Pn((function(){h()}),{userLevel:0,cardID:""}),i=l.onChange,s=l.onSubmit,d=l.values,m=Object(et.a)(yn,{update:function(t,n){var r=n.data.editCardIDAndUserLevel;a(r),e.history.push("/dashboard")},variables:d,onError:function(e){bt(e)}}),f=Object(u.a)(m,2),h=f[0],p=f[1],g=Object(o.useState)(!1),E=Object(u.a)(g,2);E[0],E[1];return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(Xa,{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},c.a.createElement(ct.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"}},c.a.createElement(nt.a,{className:"avatar",size:"large",alt:"Face In",src:zt.link,onError:function(e){console.log(e)}}),"\xa0 \xa0",c.a.createElement(at.a,null,c.a.createElement(er,{level:3},"Just a few seconds...")),c.a.createElement(lt.a,null),c.a.createElement(er,{level:4},"Dear ",n.firstName," ",n.lastName,", tell us more about you!"),c.a.createElement(kn.a,{name:"basic",initialValues:{userLevel:d.role,cardID:d.cardID},onFinish:s},c.a.createElement(kn.a.Item,{label:"Staff ID/Matrix No",name:"cardID",rules:[{required:!0,message:"Please input your staff ID/Matrix No!"}]},c.a.createElement(Sn.a,{placeholder:"Enter your staff ID/Matrix No",name:"cardID",onChange:i})),c.a.createElement(kn.a.Item,{label:"Role",name:"userLevel",valuePropName:"checked"},c.a.createElement(Kn.default.Group,{name:"userLevel",value:d.userLevel,onChange:i},c.a.createElement(Kn.default,{value:0},"Student"),c.a.createElement(Kn.default,{value:1},"Lecturer"))),c.a.createElement(lt.a,null),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{type:"primary",htmlType:"submit",loading:p.loading},"Submit"))),c.a.createElement(rt.a,{type:"danger",htmlType:"submit",disabled:p.loading,onClick:function(){return r()}},"Logout"))),c.a.createElement(ht,null))},nr=tt.a.Content,ar=(Et.a.Title,function(){return c.a.createElement(tt.a,{className:"home layout"},c.a.createElement(Mn,null),c.a.createElement(nr,null,c.a.createElement(ct.a,null)),c.a.createElement(ht,null))}),rr=tt.a.Content,or=(Et.a.Title,function(){return c.a.createElement(tt.a,{className:"home layout"},c.a.createElement(Mn,null),c.a.createElement(rr,null,c.a.createElement(ct.a,null)),c.a.createElement(ht,null))}),cr=tt.a.Content,lr=Et.a.Title,ir=function(){return c.a.createElement(tt.a,{className:"home layout"},c.a.createElement(Mn,null),c.a.createElement(cr,null,c.a.createElement(ct.a,null,c.a.createElement(jn.a,null,c.a.createElement(lr,{level:2},"User Guidelines \ud83e\uddfe")),c.a.createElement(jn.a,null,'There are 2 user roles which are "Student" and "Professor"')),c.a.createElement(lt.a,null),c.a.createElement(ct.a,null,c.a.createElement(jn.a,null,"Instructions For Professor:"),c.a.createElement(jn.a,null,"1. Register an account."),c.a.createElement(jn.a,null,"2. Create a course."),c.a.createElement(jn.a,null,"3. Give the course unique ID to your students."),c.a.createElement(jn.a,null,"4. Students need to send the request to enrol, approve the enrolment."),c.a.createElement(jn.a,null,"5. You do not need upload student's face photo, which will be done by students."),c.a.createElement(jn.a,null,"6. After all student enrolled, select a course and take the attendance."),c.a.createElement(jn.a,null,"7. You can see how many face photo of all the enrolled students have uploaded."),c.a.createElement(jn.a,null,"8. Ensure that the students upload their face photo, otherwise there is no facial data of that student for reference."),c.a.createElement(jn.a,null,"9. Only those enrol in the particular course will be counted into dataset for facial classification."),c.a.createElement(jn.a,null,"10. Inside attendance taking form, select the time, date and camera."),c.a.createElement(jn.a,null,"11. Wait for all the models being loaded."),c.a.createElement(jn.a,null,"12. Set the approriate threshold distance as you wish."),c.a.createElement(jn.a,null,"13. Submit the attendance form if finished."),c.a.createElement(jn.a,null,'14. Visualize the attendance data in "Attendance History", or you can enter a particular course and click "View Attendance History".'),c.a.createElement(jn.a,null,'15. You can "Warn" or "Kick" the student out of a course.'),c.a.createElement(jn.a,null,"16. The face photo of the student who is kicked out will not be counted next time taking the attendance.")),c.a.createElement(lt.a,null),c.a.createElement(ct.a,null,c.a.createElement(jn.a,null,"Instructions For Student:"),c.a.createElement(jn.a,null,"1. Register an account."),c.a.createElement(jn.a,null,"2. Enrol a course."),c.a.createElement(jn.a,null,"3. Wait for approval from the lecturer."),c.a.createElement(jn.a,null,'4. Upload your face photo in "Face Gallery", best to have at least 2 face photo.'),c.a.createElement(jn.a,null,"5. Wait for all models being loaded."),c.a.createElement(jn.a,null,"6. The system will perform face detection, ensuring only a single face exist and rejecting photo with empty face or multiple faces."),c.a.createElement(jn.a,null,"7. The photo will be uploaded to the image storage."),c.a.createElement(jn.a,null,"8. When your lecturer take the attendance of a particular course, all your uploaded facial data will be counted into the dataset for facial comparison."),c.a.createElement(jn.a,null,'9. Visualize the attendance data in "Attendance History", or you can enter a particular course and click "View Attendance History".')),c.a.createElement(lt.a,null),c.a.createElement(ct.a,null,c.a.createElement(jn.a,{style:{display:"flex",justifyContent:"flex-end"}},"The website use API provided by: ",c.a.createElement("a",{href:"https://github.com/justadudewhohacks/face-api.js",target:"_blank"},"face-api.js")),c.a.createElement(jn.a,{style:{display:"flex",justifyContent:"flex-end"}},"Credit to author: ",c.a.createElement("a",{href:"https://github.com/justadudewhohacks",target:"_blank"},"justadudewhohacks")))),c.a.createElement(ht,null))},ur=n(306),sr=n(795),dr=tt.a.Content,mr=(Ia.a.Option,function(e){var t=[{name:"Home",link:"/dashboard"},{name:"Course: ".concat(e.match.params.id),link:"/course/".concat(e.match.params.id)},{name:"Take Attendance",link:"takeAttendance"}],n=Object(o.useState)(na()().toISOString()),a=Object(u.a)(n,2),r=a[0],l=a[1],i=Object(o.useState)(na()().toISOString()),s=Object(u.a)(i,2),d=s[0],m=s[1],f=Object(et.b)(xt,{onError:function(t){e.history.push("/dashboard"),bt(t)},variables:{id:e.match.params.id},notifyOnNetworkStatusChange:!0}),h=Object(et.a)(rn,{update:function(t,n){var a=n.data;ot.a.success("Success Submit."),e.history.push("/course/".concat(e.match.params.id,"/attendanceRoom/").concat(a.createAttendance._id))},onError:function(e){bt(e)}}),p=Object(u.a)(h,2),g=p[0],E=p[1];return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:t}),c.a.createElement(dr,null,c.a.createElement(ct.a,{title:"Attendance Form",className:"addCourse__card"},c.a.createElement(kn.a,{onFinish:function(){f.data&&g({variables:{date:r,time:d,courseID:e.match.params.id}})}},c.a.createElement(kn.a.Item,{label:"Course"},f.data&&c.a.createElement("span",null,f.data.getCourse.code," -",f.data.getCourse.name," (",f.data.getCourse.session,")"),f.loading&&c.a.createElement(c.a.Fragment,null,"Fetching Course Detail... ",c.a.createElement(Wn.a,null))),c.a.createElement(kn.a.Item,{label:"Date"},c.a.createElement(ur.a,{defaultValue:na()(),format:"YYYY/MM/DD",onChange:function(e){l(null===e||void 0===e?void 0:e._d.toISOString())}})),c.a.createElement(kn.a.Item,{label:"Time"}," ",c.a.createElement(sr.a,{defaultValue:na()(),format:"HH:mm",onChange:function(e){m(null===e||void 0===e?void 0:e._d.toISOString())}})),c.a.createElement(kn.a.Item,null,c.a.createElement(rt.a,{className:"btn",disabled:f.loading,type:"primary",htmlType:"submit",loading:E.loading},"Submit"))))),c.a.createElement(ht,null)))}),fr=n(827),hr=n(797);function pr(){pr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function gr(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var Er=function(e){var t=e.addFacePhotoCallback,n=e.galleryRefetch,a=e.countRefetch,r=e.loading,l=Object(o.useState)(!1),i=Object(u.a)(l,2),s=i[0],d=i[1],m=Object(o.useState)([]),f=Object(u.a)(m,2),h=f[0],p=f[1],g=Object(o.useState)([]),E=Object(u.a)(g,2),v=E[0],b=E[1],y=Object(o.useState)(""),O=Object(u.a)(y,2),j=O[0],w=O[1],x=Object(o.useState)(""),I=Object(u.a)(x,2),C=I[0],N=I[1],D=Object(o.useState)(!1),L=Object(u.a)(D,2),k=L[0],S=L[1],_=Object(o.useState)(0),P=Object(u.a)(_,2),A=P[0],F=P[1],T=Object(o.useState)([]),$=Object(u.a)(T,2),R=$[0],M=$[1],G=function(){var e=Object(xa.a)(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0),N(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(xa.a)(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=t.fileList).length){e.next=6;break}return b([]),F(0),M([]),e.abrupt("return");case 6:if(n[0].url||n[0].preview){e.next=13;break}if(!1!==/\.(jpe?g|png)$/i.test(n[0].name)){e.next=10;break}return alert("Not an image file (only JPG/JEPG/PNG accepted)!"),e.abrupt("return");case 10:return e.next=12,gr(n[0].originFileObj);case 12:n[0].preview=e.sent;case 13:if(w(n[0].url||n[0].preview),M(n),!(n[0].preview.length>0)){e.next=19;break}return S(!0),e.next=19,Sa(n[0].preview,160).then((function(e){var t;p(e),F(e.length),b(null===(t=e[0])||void 0===t?void 0:t.descriptor),S(!1)}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(jn.a,{style:{display:"flex",alignItems:"center"}},c.a.createElement(wn.a,null,c.a.createElement(hr.a,{beforeUpload:function(){return!1},multiple:!1,listType:"picture-card",onPreview:G,onChange:z,accept:"image/x-png,image/jpeg",progress:!0,fileList:R},R.length>=1?null:c.a.createElement("div",null,c.a.createElement(fr.a,null),c.a.createElement("div",{style:{marginTop:8}},"Upload")))),c.a.createElement(wn.a,null," ",c.a.createElement(rt.a,{className:"btn",type:"primary",loading:r,disabled:0===j.length||r||1!==A||128!==v.length,onClick:function(){j.length>0&&128===v.length&&t({update:function(e,t){n(),a(),ot.a.success("Add Face Photo Success!")},onError:function(e){bt(e)},variables:{photoData:j,faceDescriptor:v.toString()}})}},"Save"))),c.a.createElement(jn.a,null,c.a.createElement("div",null,A>1&&c.a.createElement("span",{className:"alert"},"Only single face allowed"),0===A&&c.a.createElement("span",{className:"alert"},"No face detected"),c.a.createElement("p",null,"Number of detection:"," ",k?c.a.createElement(c.a.Fragment,null,"Detecting face... ",c.a.createElement(Wn.a,null)):A),"Face Descriptor:"," ",0===A&&!k&&c.a.createElement("span",null,"Empty"),k&&c.a.createElement(c.a.Fragment,null,"Generating 128 measurements... ",c.a.createElement(Wn.a,null)),c.a.createElement("br",null),h.map((function(e,t){return c.a.createElement("div",{key:t,style:{wordBreak:"break-all",marginBottom:"10px",backgroundColor:"lightblue"}},c.a.createElement("p",{style:{color:"red",fontSize:"20px",fontWeight:900}},"Face #",t+1,":"," ")," ",e.descriptor.toString())})))),c.a.createElement(ut.a,{visible:s,title:C,footer:null,onCancel:function(){return d(!1)}},c.a.createElement("img",{alt:"example",style:{width:"100%"},src:j})))};function vr(){vr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var br=Ia.a.Option,yr=function(e){var t,n=e.addFacePhotoCallback,a=e.galleryRefetch,r=e.countRefetch,l=e.loading,i=Object(o.useState)(T),s=Object(u.a)(i,2),m=s[0],f=s[1],h=Object(o.useState)($),p=Object(u.a)(h,2),g=p[0],E=p[1],v=Object(o.useState)([]),b=Object(u.a)(v,2),y=b[0],O=b[1],j=Object(o.useState)(),w=Object(u.a)(j,2),x=w[0],I=w[1],C=Object(o.useState)(null),N=Object(u.a)(C,2),D=N[0],L=N[1],k=Object(o.useState)([]),S=Object(u.a)(k,2),_=S[0],P=S[1],A=Object(o.useState)(0),M=Object(u.a)(A,2),G=(M[0],M[1],Object(o.useState)("")),z=Object(u.a)(G,2),U=z[0],W=z[1],Y=Object(o.useState)(""),q=Object(u.a)(Y,2),H=q[0],V=q[1],B=Object(o.useRef)(),K=Object(o.useRef)();Object(o.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then(function(){var e=Object(xa.a)(vr().mark((function e(t){var n;return vr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter((function(e){return"videoinput"===e.kind}));case 2:n=e.sent,O(Object(d.a)(Object(d.a)({},y),{},{inputDevice:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){function e(){if("undefined"!==typeof B.current&&null!==B.current&&4===B.current.video.readyState){W(B.current.getScreenshot());var e=B.current.video.videoWidth,t=B.current.video.videoHeight;K.current.width=e,K.current.height=t,Sa(B.current.getScreenshot(),160).then((function(e){var t;L(e),P(null===(t=e[0])||void 0===t?void 0:t.descriptor),V("")})).catch((function(e){V("Preparing face matcher and device setup, please wait...")}));var n=K.current.getContext("2d");!function(e,t){e&&e.forEach((function(e){var n=e.detection.box,a=n.x,r=n.y,o=n.width,c=n.height,l=e.landmarks._positions;t.font="normal 18px Gotham, Helvetica Neue, sans-serif",t.lineWidth=2,t.strokeStyle="#08E",l.map((function(e){t.beginPath(),t.fillStyle="#08E",t.arc(e._x,e._y,3,0,2*Math.PI),t.closePath(),t.fill()})),t.beginPath(),t.rect(a,r,o,c),t.stroke()}))}(D,n)}}var t=setInterval((function(){e()}),700);return function(){return clearInterval(t)}}));return c.a.createElement(ct.a,null,c.a.createElement(kn.a,null,c.a.createElement(kn.a.Item,{label:"Webcam"},c.a.createElement(Ia.a,{defaultValue:"Select Webcam",style:{width:500},onChange:function(e){I(e)}},null===y||void 0===y||null===(t=y.inputDevice)||void 0===t?void 0:t.map((function(e){return c.a.createElement(br,{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement(kn.a.Item,{label:"Webcam Size"},c.a.createElement(Ia.a,{defaultValue:F,style:{width:200},onChange:function(e){R.map((function(t){e===t.label&&(f(t.width),E(t.height))}))}},R.map((function(e){return c.a.createElement(br,{key:e.label,value:e.label},e.label)}))))),c.a.createElement("p",{style:{fontSize:"18px"}},H),c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(Ma.a,{muted:!0,ref:B,audio:!1,width:m,height:g,screenshotFormat:"image/jpeg",videoConstraints:{deviceId:x},mirrored:!0}),c.a.createElement("canvas",{ref:K,style:{position:"absolute",textAlign:"center",zindex:8,width:m,height:g}})),U&&c.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},c.a.createElement("h3",null,"Previous Capture: "),c.a.createElement("img",{src:U,alt:"Capture",style:{width:"200px",height:"200px"}}),c.a.createElement("div",{style:{marginTop:"10px"}},c.a.createElement(rt.a,{className:"btn",type:"primary",onClick:function(){n({update:function(){a(),r(),ot.a.success("Add Face Photo Success!")},onError:function(e){bt(e)},variables:{photoData:U,faceDescriptor:_.toString()}})},disabled:l||D&&1!==D.length||_&&128!==_.length,loading:l},"Save"))),c.a.createElement("div",null,c.a.createElement("p",null,"Number of detection: ",D?D.length:0," ",D&&D.length>1&&c.a.createElement("span",{className:"alert"},"Cannot more than 2")),"Face Descriptors:"," ",D&&D.map((function(e,t){return c.a.createElement("div",{key:t,style:{wordBreak:"break-all",marginBottom:"10px",backgroundColor:"lightblue"}},c.a.createElement("strong",{style:{fontSize:"20px",color:"red"}},"Face #",t,":"," "),e.descriptor.toString())}))))};function Or(){Or=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),c=new w(a||[]);return o._invoke=function(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var c=n.delegate;if(c){var l=y(c,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=u(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===s)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}(e,n,c),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var s={};function d(){}function m(){}function f(){}var h={};l(h,r,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(x([])));g&&g!==t&&n.call(g,r)&&(h=g);var E=f.prototype=d.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,o){function c(){return new t((function(a,c){!function a(r,o,c,l){var i=u(e[r],e,o);if("throw"!==i.type){var s=i.arg,d=s.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,c,l)}),(function(e){a("throw",e,c,l)})):t.resolve(d).then((function(e){s.value=e,c(s)}),(function(e){return a("throw",e,c,l)}))}l(i.arg)}(r,o,a,c)}))}return a=a?a.then(c,c):c()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,s;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=f,l(E,"constructor",f),l(f,"constructor",m),m.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},v(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var c=new b(i(t,n,a,r),o);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(E),l(E,c,"Generator"),l(E,r,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),i=n.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}var jr=Ia.a.Option,wr=function(e){var t=e.galleryRefetch,n=e.countRefetch,a=Object(o.useState)("From Disk"),r=Object(u.a)(a,2),l=r[0],i=r[1],s=Object(o.useState)(!1),d=Object(u.a)(s,2),m=d[0],f=d[1],h=Object(o.useState)(""),p=Object(u.a)(h,2),g=p[0],E=p[1],v=Object(o.useState)(""),b=Object(u.a)(v,2),y=b[0],O=b[1],j=Object(et.a)(fn,{onError:function(e){bt(e)}}),w=Object(u.a)(j,2),x=w[0],I=w[1].loading;return Object(o.useEffect)((function(){function e(){return(e=Object(xa.a)(Or().mark((function e(){return Or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La(E,O);case 2:f(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Fa()&&$a()&&Ta()?f(!0):function(){e.apply(this,arguments)}()}),[m]),c.a.createElement(ct.a,null,c.a.createElement(ct.a,{title:"Model Load"},c.a.createElement(za,{errorMessage:y})),c.a.createElement("br",null),m?y?c.a.createElement("div",{className:"error"},y):m&&0===y.length&&c.a.createElement("div",null,c.a.createElement(kn.a,null,c.a.createElement(kn.a.Item,{label:"Upload Option"},c.a.createElement(Ia.a,{defaultValue:"From Disk",style:{width:200},onChange:function(e){i(e)}},A.map((function(e){return c.a.createElement(jr,{key:e,value:e},e)}))))),"From Disk"===l?c.a.createElement(Er,{addFacePhotoCallback:x,galleryRefetch:t,countRefetch:n,loading:I}):c.a.createElement(yr,{addFacePhotoCallback:x,galleryRefetch:t,countRefetch:n,loading:I})):c.a.createElement(Ga,{loadingMessage:g}))},xr=tt.a.Content,Ir=function(){var e,t=Object(o.useContext)(ce),n=t.facePhotos,a=t.fetchedDone,r=t.loadFacePhotos,l=t.setFetchedDone,i=Object(o.useState)({}),m=Object(u.a)(i,2),f=m[0],h=m[1],p=Object(o.useState)(!1),g=Object(u.a)(p,2),E=g[0],v=g[1],b=Object(o.useState)(),y=Object(u.a)(b,2),O=y[0],j=y[1],w=Object(et.b)(Dt,{onCompleted:function(e){e.getFacePhotos.facePhotos.map((function(e){h(Object(d.a)(Object(d.a)({},f),{},Object(_n.a)({},e._id,!1)))}))},onError:function(e){bt(e)},variables:{limit:10},notifyOnNetworkStatusChange:!0}),x=w.data,I=w.loading,C=w.refetch,N=w.fetchMore,D=Object(et.b)(Nt,{onError:function(e){bt(e)}}),L=Object(et.a)(hn,{onError:function(e){bt(e)}}),k=Object(u.a)(L,2),S=k[0],P=k[1];Object(o.useEffect)((function(){r((null===x||void 0===x?void 0:x.getFacePhotos.facePhotos)||[]),x&&(x.getFacePhotos.hasNextPage?l(!1):l(!0))}),[x]);return c.a.createElement(tt.a,{className:"layout"},c.a.createElement(tn,null),c.a.createElement(tt.a,null,c.a.createElement(Xt,null),c.a.createElement(an,{titleList:[{name:"Face Gallery",link:"/facegallery"}]}),c.a.createElement(xr,null,c.a.createElement(ct.a,null,c.a.createElement(wr,{galleryRefetch:C,countRefetch:D.refetch}),c.a.createElement(ct.a,{title:c.a.createElement("strong",null,"Your Gallery:"," ",(null===(e=D.data)||void 0===e?void 0:e.getFacePhotosCount)||0)},n.map((function(e,t){return c.a.createElement(ct.a,{key:e._id},c.a.createElement(ct.a,null,c.a.createElement("img",{height:150,width:120,"data-src":e.photoURL,src:"".concat("/attendvanc","/img/loader.gif"),className:"lazyload",alt:"Face Photo: "+t}),c.a.createElement("br",null)," ",c.a.createElement("br",null)),"\xa0",c.a.createElement("strong",null,"Face Descriptor: "),c.a.createElement(rt.a,{onClick:function(){return t=e._id,void h(Object(d.a)(Object(d.a)({},f),{},Object(_n.a)({},t,!f[t])));var t}},f[e._id]?"Hide":"Show"),f[e._id]&&c.a.createElement("p",{style:{wordBreak:"break-all",marginBottom:"10px",backgroundColor:"lightblue"}},e.faceDescriptor),c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},c.a.createElement("p",null,"Uploaded at: ",na()(e.createdAt).format("LLL"))),c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},c.a.createElement(rt.a,{className:"btndng",type:"danger",onClick:function(){v(!0),j(e)}},"Delete Photo")))})),c.a.createElement(oa,{loading:I}),c.a.createElement(ra,{loading:I,payload:n,fetchedDone:a,allLoadedMessage:"All Face Photo Loaded",noItemMessage:"No Face Photo Added...",handleFetchMore:function(){N({variables:{limit:10,cursor:n[n.length-1]._id},onError:function(e){bt(e)},updateQuery:function(e,t){var n=t.fetchMoreResult;return{getFacePhotos:{__typename:"FacePhotos",facePhotos:[].concat(Object(s.a)(e.getFacePhotos.facePhotos),Object(s.a)(n.getFacePhotos.facePhotos)),hasNextPage:n.getFacePhotos.hasNextPage}}}})}}),c.a.createElement(mt,{title:"Delete Photo",action:_.action.delete,itemType:_.name,visible:E,loading:P.loading,handleOk:function(){S({update:function(e,t){var n=t.data;ot.a.success(n.deleteFacePhoto),j(null),v(!1),C(),D.refetch()},variables:{photoID:O._id}})},handleCancel:function(){v(!1)},payload:O})))),c.a.createElement(ht,null)))},Cr=n(101),Nr=n(421),Dr=["component"];var Lr=function(e){var t=e.component,n=Object(Cr.a)(e,Dr),a=Object(o.useContext)(B).user,r=Object(et.b)(Nt,{onError:function(e){bt(e)}});return Object(o.useEffect)((function(){a&&0===a.userLevel&&r.data&&r.data.getFacePhotosCount<2&&(Nr.a.info({message:c.a.createElement("strong",null,"Please add your face photograph for at least 2",c.a.createElement("br",null),c.a.createElement("br",null)),description:"Number of face photograph uploaded: ".concat(r.data.getFacePhotosCount)}),"/notification"!=window.location.pathname&&"/facegallery"!=window.location.pathname&&(window.location.href="/facegallery"))}),[r]),c.a.createElement(i.b,Object.assign({},n,{render:function(e){return!a||0!==a.userLevel&&1!==a.userLevel?a&&-1===a.userLevel?c.a.createElement(i.a,{to:"/aboutYourself"}):c.a.createElement(i.a,{to:"/"}):c.a.createElement(t,e)}}))},kr=["component"];var Sr=function(e){var t=e.component,n=Object(Cr.a)(e,kr),a=Object(o.useContext)(B).user;return c.a.createElement(i.b,Object.assign({},n,{render:function(e){return a&&1===a.userLevel?c.a.createElement(t,e):c.a.createElement(i.a,{to:"/"})}}))},_r=["component"];var Pr=function(e){var t=e.component,n=Object(Cr.a)(e,_r),a=Object(o.useContext)(B).user;return c.a.createElement(i.b,Object.assign({},n,{render:function(e){return a?c.a.createElement(i.a,{to:"/dashboard"}):c.a.createElement(t,e)}}))},Ar=["component"];var Fr,Tr,$r,Rr,Mr,Gr=function(e){var t=e.component,n=Object(Cr.a)(e,Ar),a=Object(o.useContext)(B).user,r=Object(et.b)(Nt,{onError:function(e){bt(e)}});return Object(o.useEffect)((function(){a&&0===a.userLevel&&r.data&&r.data.getFacePhotosCount<2&&(Nr.a.info({message:c.a.createElement("strong",null,"Please add your face photograph for at least 2",c.a.createElement("br",null),c.a.createElement("br",null)),description:"Number of face photograph uploaded: ".concat(r.data.getFacePhotosCount)}),"/notification"!=window.location.pathname&&"/facegallery"!=window.location.pathname&&(window.location.href="/facegallery"))}),[r]),c.a.createElement(i.b,Object.assign({},n,{render:function(e){return a&&0===a.userLevel?c.a.createElement(t,e):c.a.createElement(i.a,{to:"/"})}}))},zr=["component"],Ur=function(e){var t=e.component,n=Object(Cr.a)(e,zr),a=Object(o.useContext)(B).user;return console.log(n),c.a.createElement(i.b,{render:function(e){return a&&-1==a.userLevel?c.a.createElement(t,e):c.a.createElement(i.a,{to:"/"})}})};jt()(Fr||(Fr=Object(yt.a)(["\n  mutation createNotification {\n    createNotification\n  }\n"]))),jt()(Tr||(Tr=Object(yt.a)(["\n  mutation deleteAllNotification {\n    deleteAllNotification\n  }\n"]))),jt()($r||($r=Object(yt.a)(["\n  mutation testingCreateCourse {\n    testingCreateCourse\n  }\n"]))),jt()(Rr||(Rr=Object(yt.a)(["\n  mutation testingDeleteAllCourse {\n    testingDeleteAllCourse\n  }\n"]))),jt()(Mr||(Mr=Object(yt.a)(["\n  mutation testingRegisterStudent($courseID: String!) {\n    testingRegisterStudent(courseID: $courseID)\n  }\n"]))),n(784);var Wr=function(){return c.a.createElement(se,null,c.a.createElement(J,null,c.a.createElement(ge,null,c.a.createElement(W,null,c.a.createElement(ee,null,c.a.createElement(re,null,c.a.createElement(ie,null,c.a.createElement(me,null,c.a.createElement(l.a,null,c.a.createElement(i.d,null,c.a.createElement(Pr,{exact:!0,path:"/",component:Gn}),c.a.createElement(Pr,{exact:!0,path:"/signin",component:Bn}),c.a.createElement(Pr,{exact:!0,path:"/signup",component:Qn}),c.a.createElement(Ur,{exact:!0,path:"/aboutYourself",component:tr}),c.a.createElement(Lr,{exact:!0,path:"/dashboard",component:$n}),c.a.createElement(Lr,{exact:!0,path:"/profile",component:ua}),c.a.createElement(Lr,{exact:!0,path:"/notification",component:la}),c.a.createElement(Lr,{exact:!0,path:"/course/:id",component:Cn}),c.a.createElement(Sr,{exact:!0,path:"/course/:id/attendanceForm",component:mr}),c.a.createElement(Lr,{exact:!0,path:"/course/:courseID/attendanceRoom/:attendanceID",component:Za}),c.a.createElement(Lr,{exact:!0,path:"/course/:id/attendanceList",component:va}),c.a.createElement(Lr,{exact:!0,path:"/course/:courseID/attendanceList/:attendanceID",component:wa}),c.a.createElement(Gr,{exact:!0,path:"/facegallery",component:Ir}),c.a.createElement(i.b,{exact:!0,path:"/termandcondition",component:or}),c.a.createElement(i.b,{exact:!0,path:"/privacypolicy",component:ar}),c.a.createElement(i.b,{exact:!0,path:"/userguidelines",component:ir}),c.a.createElement(Lr,{component:Xn})))))))))))},Yr=n(127),qr=n(307),Hr=n(418),Vr=n(73),Br=n(420),Kr=Object(Hr.a)({uri:"https://api-attendlytical.herokuapp.com"}),Jr=Object(Br.a)((function(){var e=localStorage.getItem("jwtToken");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),Qr=new Yr.c({link:Jr.concat(Kr),cache:new qr.a({dataIdFromObject:function(e){return Object(qr.b)(e)}})}),Zr=c.a.createElement(Vr.a,{client:Qr},c.a.createElement(Wr,null));n(785),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Zr,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[453,1,2]]]);
//# sourceMappingURL=main.897e2a20.chunk.js.map